!function(t,a){"object"==typeof exports&&"object"==typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?exports.fe=a():t.fe=a()}(this,function(){return function(t){function a(i){if(s[i])return s[i].exports;var n=s[i]={exports:{},id:i,loaded:!1};return t[i].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}var s={};return a.m=t,a.c=s,a.p="",a(0)}([function(t,a,s){"use strict";function i(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0}),a.Earth=void 0;var n=function(){function t(t,a){for(var s=0;s<a.length;s++){var i=a[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,s,i){return s&&t(a.prototype,s),i&&t(a,i),a}}(),e=s(18),r=s(7),o=s(9),h=s(8),u=s(10),l=s(6),c=6378137,M=function(){function t(a){i(this,t),this._zoomDist=[];for(var s=0;s<18;s++)this._zoomDist.push(c*Math.pow(1.05,18-s));this._container=document.getElementById(a),this._context=new r.Context(this._container),this._camera=new l.Camera,this._zoom=3,this._camera.eye=[0,0,this._zoomDist[this._zoom-1]],this._sourceLayers=[],new o.DragPan(this),new h.DoubleClickZoom(this),new u.MouseWheelZoom(this)}return n(t,[{key:"rotateX",value:function(t){this.rotate(t)}},{key:"rotateY",value:function(t){this.rotate(void 0,t)}},{key:"rotate",value:function(t,a){t&&(this._camera.rotateX=this._camera.rotateX+t),a&&(this._camera.rotateY=this._camera.rotateY+a),this.render()}},{key:"setZoom",value:function(t){t=t>18?18:t<1?1:t,t!==this._zoom&&(this._zoom=t,this._camera.eye=[0,0,this._zoomDist[t-1]],this.render())}},{key:"addLayer",value:function(t){var a=e.SourceLayer.from(this._context,t);this._sourceLayers.push(a),this.render()}},{key:"render",value:function(){this._sourceLayers.forEach(function(t){t.render(this._camera)}.bind(this))}},{key:"context",get:function(){return this._context}},{key:"zoom",get:function(){return this._zoom}}]),t}();a.Earth=M},function(t,a){var s={};s.EPSILON=1e-6,s.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,s.RANDOM=Math.random,s.ENABLE_SIMD=!1,s.SIMD_AVAILABLE=s.ARRAY_TYPE===Float32Array&&"SIMD"in this,s.USE_SIMD=s.ENABLE_SIMD&&s.SIMD_AVAILABLE,s.setMatrixArrayType=function(t){s.ARRAY_TYPE=t};var i=Math.PI/180;s.toRadian=function(t){return t*i},s.equals=function(t,a){return Math.abs(t-a)<=s.EPSILON*Math.max(1,Math.abs(t),Math.abs(a))},t.exports=s},function(t,a,s){a.glMatrix=s(1),a.mat2=s(22),a.mat2d=s(23),a.mat3=s(3),a.mat4=s(24),a.quat=s(25),a.vec2=s(26),a.vec3=s(4),a.vec4=s(5)},function(t,a,s){var i=s(1),n={};n.create=function(){var t=new i.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat4=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[4],t[4]=a[5],t[5]=a[6],t[6]=a[8],t[7]=a[9],t[8]=a[10],t},n.clone=function(t){var a=new i.ARRAY_TYPE(9);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},n.fromValues=function(t,a,s,n,e,r,o,h,u){var l=new i.ARRAY_TYPE(9);return l[0]=t,l[1]=a,l[2]=s,l[3]=n,l[4]=e,l[5]=r,l[6]=o,l[7]=h,l[8]=u,l},n.set=function(t,a,s,i,n,e,r,o,h,u){return t[0]=a,t[1]=s,t[2]=i,t[3]=n,t[4]=e,t[5]=r,t[6]=o,t[7]=h,t[8]=u,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.transpose=function(t,a){if(t===a){var s=a[1],i=a[2],n=a[5];t[1]=a[3],t[2]=a[6],t[3]=s,t[5]=a[7],t[6]=i,t[7]=n}else t[0]=a[0],t[1]=a[3],t[2]=a[6],t[3]=a[1],t[4]=a[4],t[5]=a[7],t[6]=a[2],t[7]=a[5],t[8]=a[8];return t},n.invert=function(t,a){var s=a[0],i=a[1],n=a[2],e=a[3],r=a[4],o=a[5],h=a[6],u=a[7],l=a[8],c=l*r-o*u,M=-l*e+o*h,f=u*e-r*h,m=s*c+i*M+n*f;return m?(m=1/m,t[0]=c*m,t[1]=(-l*i+n*u)*m,t[2]=(o*i-n*r)*m,t[3]=M*m,t[4]=(l*s-n*h)*m,t[5]=(-o*s+n*e)*m,t[6]=f*m,t[7]=(-u*s+i*h)*m,t[8]=(r*s-i*e)*m,t):null},n.adjoint=function(t,a){var s=a[0],i=a[1],n=a[2],e=a[3],r=a[4],o=a[5],h=a[6],u=a[7],l=a[8];return t[0]=r*l-o*u,t[1]=n*u-i*l,t[2]=i*o-n*r,t[3]=o*h-e*l,t[4]=s*l-n*h,t[5]=n*e-s*o,t[6]=e*u-r*h,t[7]=i*h-s*u,t[8]=s*r-i*e,t},n.determinant=function(t){var a=t[0],s=t[1],i=t[2],n=t[3],e=t[4],r=t[5],o=t[6],h=t[7],u=t[8];return a*(u*e-r*h)+s*(-u*n+r*o)+i*(h*n-e*o)},n.multiply=function(t,a,s){var i=a[0],n=a[1],e=a[2],r=a[3],o=a[4],h=a[5],u=a[6],l=a[7],c=a[8],M=s[0],f=s[1],m=s[2],d=s[3],p=s[4],_=s[5],x=s[6],v=s[7],b=s[8];return t[0]=M*i+f*r+m*u,t[1]=M*n+f*o+m*l,t[2]=M*e+f*h+m*c,t[3]=d*i+p*r+_*u,t[4]=d*n+p*o+_*l,t[5]=d*e+p*h+_*c,t[6]=x*i+v*r+b*u,t[7]=x*n+v*o+b*l,t[8]=x*e+v*h+b*c,t},n.mul=n.multiply,n.translate=function(t,a,s){var i=a[0],n=a[1],e=a[2],r=a[3],o=a[4],h=a[5],u=a[6],l=a[7],c=a[8],M=s[0],f=s[1];return t[0]=i,t[1]=n,t[2]=e,t[3]=r,t[4]=o,t[5]=h,t[6]=M*i+f*r+u,t[7]=M*n+f*o+l,t[8]=M*e+f*h+c,t},n.rotate=function(t,a,s){var i=a[0],n=a[1],e=a[2],r=a[3],o=a[4],h=a[5],u=a[6],l=a[7],c=a[8],M=Math.sin(s),f=Math.cos(s);return t[0]=f*i+M*r,t[1]=f*n+M*o,t[2]=f*e+M*h,t[3]=f*r-M*i,t[4]=f*o-M*n,t[5]=f*h-M*e,t[6]=u,t[7]=l,t[8]=c,t},n.scale=function(t,a,s){var i=s[0],n=s[1];return t[0]=i*a[0],t[1]=i*a[1],t[2]=i*a[2],t[3]=n*a[3],t[4]=n*a[4],t[5]=n*a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},n.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=a[0],t[7]=a[1],t[8]=1,t},n.fromRotation=function(t,a){var s=Math.sin(a),i=Math.cos(a);return t[0]=i,t[1]=s,t[2]=0,t[3]=-s,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=a[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat2d=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=0,t[3]=a[2],t[4]=a[3],t[5]=0,t[6]=a[4],t[7]=a[5],t[8]=1,t},n.fromQuat=function(t,a){var s=a[0],i=a[1],n=a[2],e=a[3],r=s+s,o=i+i,h=n+n,u=s*r,l=i*r,c=i*o,M=n*r,f=n*o,m=n*h,d=e*r,p=e*o,_=e*h;return t[0]=1-c-m,t[3]=l-_,t[6]=M+p,t[1]=l+_,t[4]=1-u-m,t[7]=f-d,t[2]=M-p,t[5]=f+d,t[8]=1-u-c,t},n.normalFromMat4=function(t,a){var s=a[0],i=a[1],n=a[2],e=a[3],r=a[4],o=a[5],h=a[6],u=a[7],l=a[8],c=a[9],M=a[10],f=a[11],m=a[12],d=a[13],p=a[14],_=a[15],x=s*o-i*r,v=s*h-n*r,b=s*u-e*r,y=i*h-n*o,S=i*u-e*o,I=n*u-e*h,g=l*d-c*m,D=l*p-M*m,F=l*_-f*m,w=c*p-M*d,E=c*_-f*d,P=M*_-f*p,A=x*P-v*E+b*w+y*F-S*D+I*g;return A?(A=1/A,t[0]=(o*P-h*E+u*w)*A,t[1]=(h*F-r*P-u*D)*A,t[2]=(r*E-o*F+u*g)*A,t[3]=(n*E-i*P-e*w)*A,t[4]=(s*P-n*F+e*D)*A,t[5]=(i*F-s*E-e*g)*A,t[6]=(d*I-p*S+_*y)*A,t[7]=(p*b-m*I-_*v)*A,t[8]=(m*S-d*b+_*x)*A,t):null},n.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},n.add=function(t,a,s){return t[0]=a[0]+s[0],t[1]=a[1]+s[1],t[2]=a[2]+s[2],t[3]=a[3]+s[3],t[4]=a[4]+s[4],t[5]=a[5]+s[5],t[6]=a[6]+s[6],t[7]=a[7]+s[7],t[8]=a[8]+s[8],t},n.subtract=function(t,a,s){return t[0]=a[0]-s[0],t[1]=a[1]-s[1],t[2]=a[2]-s[2],t[3]=a[3]-s[3],t[4]=a[4]-s[4],t[5]=a[5]-s[5],t[6]=a[6]-s[6],t[7]=a[7]-s[7],t[8]=a[8]-s[8],t},n.sub=n.subtract,n.multiplyScalar=function(t,a,s){return t[0]=a[0]*s,t[1]=a[1]*s,t[2]=a[2]*s,t[3]=a[3]*s,t[4]=a[4]*s,t[5]=a[5]*s,t[6]=a[6]*s,t[7]=a[7]*s,t[8]=a[8]*s,t},n.multiplyScalarAndAdd=function(t,a,s,i){return t[0]=a[0]+s[0]*i,t[1]=a[1]+s[1]*i,t[2]=a[2]+s[2]*i,t[3]=a[3]+s[3]*i,t[4]=a[4]+s[4]*i,t[5]=a[5]+s[5]*i,t[6]=a[6]+s[6]*i,t[7]=a[7]+s[7]*i,t[8]=a[8]+s[8]*i,t},n.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]},n.equals=function(t,a){var s=t[0],n=t[1],e=t[2],r=t[3],o=t[4],h=t[5],u=t[6],l=t[7],c=t[8],M=a[0],f=a[1],m=a[2],d=a[3],p=a[4],_=a[5],x=t[6],v=a[7],b=a[8];return Math.abs(s-M)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(n-f)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(e-m)<=i.EPSILON*Math.max(1,Math.abs(e),Math.abs(m))&&Math.abs(r-d)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(o-p)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(h-_)<=i.EPSILON*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(u-x)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(l-v)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(c-b)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))},t.exports=n},function(t,a,s){var i=s(1),n={};n.create=function(){var t=new i.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},n.clone=function(t){var a=new i.ARRAY_TYPE(3);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a},n.fromValues=function(t,a,s){var n=new i.ARRAY_TYPE(3);return n[0]=t,n[1]=a,n[2]=s,n},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t},n.set=function(t,a,s,i){return t[0]=a,t[1]=s,t[2]=i,t},n.add=function(t,a,s){return t[0]=a[0]+s[0],t[1]=a[1]+s[1],t[2]=a[2]+s[2],t},n.subtract=function(t,a,s){return t[0]=a[0]-s[0],t[1]=a[1]-s[1],t[2]=a[2]-s[2],t},n.sub=n.subtract,n.multiply=function(t,a,s){return t[0]=a[0]*s[0],t[1]=a[1]*s[1],t[2]=a[2]*s[2],t},n.mul=n.multiply,n.divide=function(t,a,s){return t[0]=a[0]/s[0],t[1]=a[1]/s[1],t[2]=a[2]/s[2],t},n.div=n.divide,n.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t[2]=Math.ceil(a[2]),t},n.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t[2]=Math.floor(a[2]),t},n.min=function(t,a,s){return t[0]=Math.min(a[0],s[0]),t[1]=Math.min(a[1],s[1]),t[2]=Math.min(a[2],s[2]),t},n.max=function(t,a,s){return t[0]=Math.max(a[0],s[0]),t[1]=Math.max(a[1],s[1]),t[2]=Math.max(a[2],s[2]),t},n.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t[2]=Math.round(a[2]),t},n.scale=function(t,a,s){return t[0]=a[0]*s,t[1]=a[1]*s,t[2]=a[2]*s,t},n.scaleAndAdd=function(t,a,s,i){return t[0]=a[0]+s[0]*i,t[1]=a[1]+s[1]*i,t[2]=a[2]+s[2]*i,t},n.distance=function(t,a){var s=a[0]-t[0],i=a[1]-t[1],n=a[2]-t[2];return Math.sqrt(s*s+i*i+n*n)},n.dist=n.distance,n.squaredDistance=function(t,a){var s=a[0]-t[0],i=a[1]-t[1],n=a[2]-t[2];return s*s+i*i+n*n},n.sqrDist=n.squaredDistance,n.length=function(t){var a=t[0],s=t[1],i=t[2];return Math.sqrt(a*a+s*s+i*i)},n.len=n.length,n.squaredLength=function(t){var a=t[0],s=t[1],i=t[2];return a*a+s*s+i*i},n.sqrLen=n.squaredLength,n.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t},n.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t},n.normalize=function(t,a){var s=a[0],i=a[1],n=a[2],e=s*s+i*i+n*n;return e>0&&(e=1/Math.sqrt(e),t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e),t},n.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]},n.cross=function(t,a,s){var i=a[0],n=a[1],e=a[2],r=s[0],o=s[1],h=s[2];return t[0]=n*h-e*o,t[1]=e*r-i*h,t[2]=i*o-n*r,t},n.lerp=function(t,a,s,i){var n=a[0],e=a[1],r=a[2];return t[0]=n+i*(s[0]-n),t[1]=e+i*(s[1]-e),t[2]=r+i*(s[2]-r),t},n.hermite=function(t,a,s,i,n,e){var r=e*e,o=r*(2*e-3)+1,h=r*(e-2)+e,u=r*(e-1),l=r*(3-2*e);return t[0]=a[0]*o+s[0]*h+i[0]*u+n[0]*l,t[1]=a[1]*o+s[1]*h+i[1]*u+n[1]*l,t[2]=a[2]*o+s[2]*h+i[2]*u+n[2]*l,t},n.bezier=function(t,a,s,i,n,e){var r=1-e,o=r*r,h=e*e,u=o*r,l=3*e*o,c=3*h*r,M=h*e;return t[0]=a[0]*u+s[0]*l+i[0]*c+n[0]*M,t[1]=a[1]*u+s[1]*l+i[1]*c+n[1]*M,t[2]=a[2]*u+s[2]*l+i[2]*c+n[2]*M,t},n.random=function(t,a){a=a||1;var s=2*i.RANDOM()*Math.PI,n=2*i.RANDOM()-1,e=Math.sqrt(1-n*n)*a;return t[0]=Math.cos(s)*e,t[1]=Math.sin(s)*e,t[2]=n*a,t},n.transformMat4=function(t,a,s){var i=a[0],n=a[1],e=a[2],r=s[3]*i+s[7]*n+s[11]*e+s[15];return r=r||1,t[0]=(s[0]*i+s[4]*n+s[8]*e+s[12])/r,t[1]=(s[1]*i+s[5]*n+s[9]*e+s[13])/r,t[2]=(s[2]*i+s[6]*n+s[10]*e+s[14])/r,t},n.transformMat3=function(t,a,s){var i=a[0],n=a[1],e=a[2];return t[0]=i*s[0]+n*s[3]+e*s[6],t[1]=i*s[1]+n*s[4]+e*s[7],t[2]=i*s[2]+n*s[5]+e*s[8],t},n.transformQuat=function(t,a,s){var i=a[0],n=a[1],e=a[2],r=s[0],o=s[1],h=s[2],u=s[3],l=u*i+o*e-h*n,c=u*n+h*i-r*e,M=u*e+r*n-o*i,f=-r*i-o*n-h*e;return t[0]=l*u+f*-r+c*-h-M*-o,t[1]=c*u+f*-o+M*-r-l*-h,t[2]=M*u+f*-h+l*-o-c*-r,t},n.rotateX=function(t,a,s,i){var n=[],e=[];return n[0]=a[0]-s[0],n[1]=a[1]-s[1],n[2]=a[2]-s[2],e[0]=n[0],e[1]=n[1]*Math.cos(i)-n[2]*Math.sin(i),e[2]=n[1]*Math.sin(i)+n[2]*Math.cos(i),t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t},n.rotateY=function(t,a,s,i){var n=[],e=[];return n[0]=a[0]-s[0],n[1]=a[1]-s[1],n[2]=a[2]-s[2],e[0]=n[2]*Math.sin(i)+n[0]*Math.cos(i),e[1]=n[1],e[2]=n[2]*Math.cos(i)-n[0]*Math.sin(i),t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t},n.rotateZ=function(t,a,s,i){var n=[],e=[];return n[0]=a[0]-s[0],n[1]=a[1]-s[1],n[2]=a[2]-s[2],e[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),e[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),e[2]=n[2],t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t},n.forEach=function(){var t=n.create();return function(a,s,i,n,e,r){var o,h;for(s||(s=3),i||(i=0),h=n?Math.min(n*s+i,a.length):a.length,o=i;o<h;o+=s)t[0]=a[o],t[1]=a[o+1],t[2]=a[o+2],e(t,t,r),a[o]=t[0],a[o+1]=t[1],a[o+2]=t[2];return a}}(),n.angle=function(t,a){var s=n.fromValues(t[0],t[1],t[2]),i=n.fromValues(a[0],a[1],a[2]);n.normalize(s,s),n.normalize(i,i);var e=n.dot(s,i);return e>1?0:Math.acos(e)},n.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},n.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]},n.equals=function(t,a){var s=t[0],n=t[1],e=t[2],r=a[0],o=a[1],h=a[2];return Math.abs(s-r)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(r))&&Math.abs(n-o)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(e-h)<=i.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))},t.exports=n},function(t,a,s){var i=s(1),n={};n.create=function(){var t=new i.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},n.clone=function(t){var a=new i.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},n.fromValues=function(t,a,s,n){var e=new i.ARRAY_TYPE(4);return e[0]=t,e[1]=a,e[2]=s,e[3]=n,e},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},n.set=function(t,a,s,i,n){return t[0]=a,t[1]=s,t[2]=i,t[3]=n,t},n.add=function(t,a,s){return t[0]=a[0]+s[0],t[1]=a[1]+s[1],t[2]=a[2]+s[2],t[3]=a[3]+s[3],t},n.subtract=function(t,a,s){return t[0]=a[0]-s[0],t[1]=a[1]-s[1],t[2]=a[2]-s[2],t[3]=a[3]-s[3],t},n.sub=n.subtract,n.multiply=function(t,a,s){return t[0]=a[0]*s[0],t[1]=a[1]*s[1],t[2]=a[2]*s[2],t[3]=a[3]*s[3],t},n.mul=n.multiply,n.divide=function(t,a,s){return t[0]=a[0]/s[0],t[1]=a[1]/s[1],t[2]=a[2]/s[2],t[3]=a[3]/s[3],t},n.div=n.divide,n.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t[2]=Math.ceil(a[2]),t[3]=Math.ceil(a[3]),t},n.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t[2]=Math.floor(a[2]),t[3]=Math.floor(a[3]),t},n.min=function(t,a,s){return t[0]=Math.min(a[0],s[0]),t[1]=Math.min(a[1],s[1]),t[2]=Math.min(a[2],s[2]),t[3]=Math.min(a[3],s[3]),t},n.max=function(t,a,s){return t[0]=Math.max(a[0],s[0]),t[1]=Math.max(a[1],s[1]),t[2]=Math.max(a[2],s[2]),t[3]=Math.max(a[3],s[3]),t},n.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t[2]=Math.round(a[2]),t[3]=Math.round(a[3]),t},n.scale=function(t,a,s){return t[0]=a[0]*s,t[1]=a[1]*s,t[2]=a[2]*s,t[3]=a[3]*s,t},n.scaleAndAdd=function(t,a,s,i){return t[0]=a[0]+s[0]*i,t[1]=a[1]+s[1]*i,t[2]=a[2]+s[2]*i,t[3]=a[3]+s[3]*i,t},n.distance=function(t,a){var s=a[0]-t[0],i=a[1]-t[1],n=a[2]-t[2],e=a[3]-t[3];return Math.sqrt(s*s+i*i+n*n+e*e)},n.dist=n.distance,n.squaredDistance=function(t,a){var s=a[0]-t[0],i=a[1]-t[1],n=a[2]-t[2],e=a[3]-t[3];return s*s+i*i+n*n+e*e},n.sqrDist=n.squaredDistance,n.length=function(t){var a=t[0],s=t[1],i=t[2],n=t[3];return Math.sqrt(a*a+s*s+i*i+n*n)},n.len=n.length,n.squaredLength=function(t){var a=t[0],s=t[1],i=t[2],n=t[3];return a*a+s*s+i*i+n*n},n.sqrLen=n.squaredLength,n.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=-a[3],t},n.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t[3]=1/a[3],t},n.normalize=function(t,a){var s=a[0],i=a[1],n=a[2],e=a[3],r=s*s+i*i+n*n+e*e;return r>0&&(r=1/Math.sqrt(r),t[0]=s*r,t[1]=i*r,t[2]=n*r,t[3]=e*r),t},n.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]+t[3]*a[3]},n.lerp=function(t,a,s,i){var n=a[0],e=a[1],r=a[2],o=a[3];return t[0]=n+i*(s[0]-n),t[1]=e+i*(s[1]-e),t[2]=r+i*(s[2]-r),t[3]=o+i*(s[3]-o),t},n.random=function(t,a){return a=a||1,t[0]=i.RANDOM(),t[1]=i.RANDOM(),t[2]=i.RANDOM(),t[3]=i.RANDOM(),n.normalize(t,t),n.scale(t,t,a),t},n.transformMat4=function(t,a,s){var i=a[0],n=a[1],e=a[2],r=a[3];return t[0]=s[0]*i+s[4]*n+s[8]*e+s[12]*r,t[1]=s[1]*i+s[5]*n+s[9]*e+s[13]*r,t[2]=s[2]*i+s[6]*n+s[10]*e+s[14]*r,t[3]=s[3]*i+s[7]*n+s[11]*e+s[15]*r,t},n.transformQuat=function(t,a,s){var i=a[0],n=a[1],e=a[2],r=s[0],o=s[1],h=s[2],u=s[3],l=u*i+o*e-h*n,c=u*n+h*i-r*e,M=u*e+r*n-o*i,f=-r*i-o*n-h*e;return t[0]=l*u+f*-r+c*-h-M*-o,t[1]=c*u+f*-o+M*-r-l*-h,t[2]=M*u+f*-h+l*-o-c*-r,t[3]=a[3],t},n.forEach=function(){var t=n.create();return function(a,s,i,n,e,r){var o,h;for(s||(s=4),i||(i=0),h=n?Math.min(n*s+i,a.length):a.length,o=i;o<h;o+=s)t[0]=a[o],t[1]=a[o+1],t[2]=a[o+2],t[3]=a[o+3],e(t,t,r),a[o]=t[0],a[o+1]=t[1],a[o+2]=t[2],a[o+3]=t[3];return a}}(),n.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]},n.equals=function(t,a){var s=t[0],n=t[1],e=t[2],r=t[3],o=a[0],h=a[1],u=a[2],l=a[3];return Math.abs(s-o)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(o))&&Math.abs(n-h)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(e-u)<=i.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(r-l)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))},t.exports=n},function(t,a,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0}),a.Camera=void 0;var e=function(){function t(t,a){for(var s=0;s<a.length;s++){var i=a[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,s,i){return s&&t(a.prototype,s),i&&t(a,i),a}}(),r=s(2),o=i(r);a.Camera=function(){function t(){n(this,t),this._eye=[0,0,19134411],this._center=[0,0,0],this._up=[0,1,0],this._rotateX=0,this._rotateY=0,this._rotateZ=0}return e(t,[{key:"rotateX",get:function(){return this._rotateX},set:function(t){t<-Math.PI/2?t=-Math.PI/2:t>Math.PI/2&&(t=Math.PI/2),this._rotateX=t}},{key:"rotateY",get:function(){return this._rotateY},set:function(t){this._rotateY=t}},{key:"rotateZ",get:function(){return this._rotateZ},set:function(t){this._rotateZ=t}},{key:"center",get:function(){return this._center}},{key:"eye",get:function(){var t=o["default"].vec3.create();return o["default"].vec3.rotateX(t,this._eye,[0,0,0],this._rotateX),o["default"].vec3.rotateY(t,t,[0,0,0],this._rotateY),t},set:function(t){this._eye=t}},{key:"up",get:function(){return this._up}}]),t}()},function(t,a){"use strict";function s(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,a){for(var s=0;s<a.length;s++){var i=a[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,s,i){return s&&t(a.prototype,s),i&&t(a,i),a}}();a.Context=function(){function t(a){s(this,t),this._container=a,this._canvas=document.createElement("canvas"),this._container.appendChild(this._canvas),this._canvas.width=this._container.offsetWidth,this._canvas.height=this._container.offsetHeight,this._gl=this._createWebGLContext()}return i(t,[{key:"_createWebGLContext",value:function(){var t=["webgl","experimental-webgl"],a=null,s=!0,i=!1,n=void 0;try{for(var e,r=t[Symbol.iterator]();!(s=(e=r.next()).done);s=!0){var o=e.value;try{a=this._canvas.getContext(o)}catch(h){console.error("failed to get context: "+h)}if(a)break}}catch(u){i=!0,n=u}finally{try{!s&&r["return"]&&r["return"]()}finally{if(i)throw n}}return a?(a.viewportWidth=this._canvas.width,a.viewportHeight=this._canvas.height):console.error("Failed to create WebGL context!"),a}},{key:"gl",get:function(){return this._gl}},{key:"canvas",get:function(){return this._canvas}}]),t}()},function(t,a){"use strict";function s(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,a){for(var s=0;s<a.length;s++){var i=a[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,s,i){return s&&t(a.prototype,s),i&&t(a,i),a}}();a.DoubleClickZoom=function(){function t(a,i){s(this,t),this._earth=a,this._bindMouseEventListeners(i)}return i(t,[{key:"_bindMouseEventListeners",value:function(t){var a=this;this._earth.context.canvas.ondblclick=function(t){var s=1;t.shiftKey&&(s=-1);var i=a._earth.zoom+s;a._earth.setZoom(i)}}}]),t}()},function(t,a){"use strict";function s(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,a){for(var s=0;s<a.length;s++){var i=a[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,s,i){return s&&t(a.prototype,s),i&&t(a,i),a}}();a.DragPan=function(){function t(a,i){s(this,t),this._earth=a,this._isMouseDown=!1,this._prevMouseX=null,this._prevMouseY=null,this._bindMouseEventListeners(i)}return i(t,[{key:"_bindMouseEventListeners",value:function(t){var a=this;this._earth.context.canvas.onmousedown=function(t){a._isMouseDown=!0,a._prevMouseX=t.clientX,a._prevMouseY=t.clientY},this._earth.context.canvas.onmouseup=function(t){a._isMouseDown=!1},this._earth.context.canvas.onmousemove=function(t){if(a._isMouseDown){var s=t.clientX-a._prevMouseX,i=t.clientY-a._prevMouseY,n=-s/10%360,e=-i/10%360;a._earth.rotate(e*Math.PI/180,n*Math.PI/180),a._prevMouseX=t.clientX,a._prevMouseY=t.clientY}},this._earth.context.canvas.onmouseout=function(t){a._isMouseDown=!1}}}]),t}()},function(t,a){"use strict";function s(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,a){for(var s=0;s<a.length;s++){var i=a[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,s,i){return s&&t(a.prototype,s),i&&t(a,i),a}}();a.MouseWheelZoom=function(){function t(a){s(this,t),this._earth=a,this._bindMouseEventListener()}return i(t,[{key:"_bindMouseEventListener",value:function(){var t=this;this._earth.context.canvas.onmousewheel=function(a){var s=-a.deltaY/100,i=t._earth.zoom+s;t._earth.setZoom(i)}}}]),t}()},function(t,a,s){"use strict";function i(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0}),a.RasterTileLayer=void 0;var n=function(){function t(t,a){for(var s=0;s<a.length;s++){var i=a[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,s,i){return s&&t(a.prototype,s),i&&t(a,i),a}}(),e=s(14),r=s(15),o=s(13),h=s(12);a.RasterTileLayer=function(){function t(a){i(this,t),this._source=a.source,this._view=a.view,this._render=new e.RasterTileLayerRender(a.context.gl),this._renderList=[],this._renderVersion=-1,this._camera=null,this._source.on("change",function(t){this._rerender(this._camera)}.bind(this))}return n(t,[{key:"render",value:function(t){this._camera=t,this._renderVersion===-1&&this._buildRenderList(),this._render.render(this._renderList,t),this._renderVersion=this._renderVersion+1}},{key:"_rerender",value:function(t){this._buildRenderList(),this._render.render(this._renderList,t),this._renderVersion=this._renderVersion+1}},{key:"_buildRenderList",value:function(){this._renderList=[];for(var t=this._view.zoom,a=1<<t,s=0;s<a;s++)for(var i=0;i<a;i++){var n=this._source.getTileImage(t,s,i);if(n){var e=new r.Tile({mesh:new o.TileMesh({zoom:t,row:s,col:i}),material:new h.ImageMaterial(n)});this._renderList.push(e)}}}}]),t}()},function(t,a){"use strict";function s(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,a){for(var s=0;s<a.length;s++){var i=a[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,s,i){return s&&t(a.prototype,s),i&&t(a,i),a}}();a.ImageMaterial=function(){function t(a){s(this,t),this._image=a}return i(t,[{key:"setup",value:function(t){this._texture||(this._texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this._image),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindTexture(t.TEXTURE_2D,null))}},{key:"bind",value:function(t,a){t.activeTexture(a),t.bindTexture(t.TEXTURE_2D,this._texture)}},{key:"unBind",value:function(t){t.bindTexture(t.TEXTURE_2D,null)}}]),t}()},function(t,a,s){"use strict";function i(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0}),a.TileMesh=void 0;var n=function(){function t(t,a){for(var s=0;s<a.length;s++){var i=a[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,s,i){return s&&t(a.prototype,s),i&&t(a,i),a}}(),e=s(21),r=256,o=16;a.TileMesh=function(){function t(a){i(this,t),this._zoom=a.zoom,this._row=a.row,this._col=a.col,this._vertices=[],this._uvs=[],this._elementIndexes=[],this._radius=6378137,this._bound={},this._createMesh()}return n(t,[{key:"_getMetersPerPixel",value:function(t){return 2*this._radius*Math.PI/(Math.pow(2,t)*r)}},{key:"_calcMercatorBound",value:function(){var t=this._getMetersPerPixel(this._zoom),a=Math.pow(2,this._zoom),s=a*r*t,i=s/2;this._bound.N=this._row*(r*t),this._bound.W=this._col*(r*t),this._bound.N=i-this._bound.N,this._bound.W=this._bound.W-i,this._bound.E=this._bound.W+r*t,this._bound.S=this._bound.N-r*t}},{key:"_calcLatLng",value:function(t,a,s,i){var n=e.Proj.mercator2Wgs84(t,a);return s?n.lat=90:i&&(n.lat=-90),n}},{key:"_createMesh",value:function(){this._calcMercatorBound();for(var t=Math.abs(this._bound.E-this._bound.W)/o,a=(1<<this._zoom)-1,s=[],i=0;i<=o;i++){for(var n=[],e=0;e<=o;e++){var r=this._bound.N-i*t,h=this._bound.W+e*t,u=this._calcLatLng(h,r,0===this._row&&0===i,this._row===a&&i===o),l=this._radius*Math.sin(u.lng*Math.PI/180)*Math.cos(u.lat*Math.PI/180),c=this._radius*Math.sin(u.lat*Math.PI/180),M=this._radius*Math.cos(u.lng*Math.PI/180)*Math.cos(u.lat*Math.PI/180);this._vertices.push(l,c,M),n.push(this._vertices.length/3-1);var f=e/o,m=i/o;this._uvs.push(f,1-m)}s.push(n)}for(var d=[],p=0;p<o;p++)for(var _=0;_<o;_++)d.push(s[p][_+1],s[p][_],s[p+1][_]),d.push(s[p][_+1],s[p+1][_],s[p+1][_+1]);this._elementIndexes=d}},{key:"setup",value:function(t){this.vertexIndexBuffer||(this.vertexPosBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexPosBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this._vertices),t.STATIC_DRAW),this.VERTEX_POS_BUF_ITEM_SIZE=3,this.vertexTextureCoordinateBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexTextureCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this._uvs),t.STATIC_DRAW),this.VERTEX_TEX_COORD_BUF_ITEM_SIZE=2,this.vertexIndexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.vertexIndexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(this._elementIndexes),t.STATIC_DRAW),this.VERTEX_INDEX_BUF_ITEM_SIZE=1,this.VERTEX_INDEX_BUF_NUM_ITEMS=this._elementIndexes.length)}},{key:"bindPoint",value:function(t,a){t.bindBuffer(t.ARRAY_BUFFER,this.vertexPosBuffer),t.vertexAttribPointer(a,this.VERTEX_POS_BUF_ITEM_SIZE,t.FLOAT,!1,0,0)}},{key:"bindTexture",value:function(t,a){t.bindBuffer(t.ARRAY_BUFFER,this.vertexTextureCoordinateBuffer),t.vertexAttribPointer(a,this.VERTEX_TEX_COORD_BUF_ITEM_SIZE,t.FLOAT,!1,0,0)}},{key:"bindIndex",value:function(t){t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.vertexIndexBuffer)}},{key:"triangleCount",get:function(){return this.VERTEX_INDEX_BUF_NUM_ITEMS}}]),t}()},function(t,a,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0}),a.RasterTileLayerRender=void 0;var e=function(){function t(t,a){for(var s=0;s<a.length;s++){var i=a[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,s,i){return s&&t(a.prototype,s),i&&t(a,i),a}}(),r=s(2),o=i(r),h=s(17),u=s(16),l=6378137;a.RasterTileLayerRender=function(){function t(a){n(this,t),this._gl=a,this._shaderProgram=null,this._setup()}return e(t,[{key:"_setup",value:function(){var t=this._gl,a=h.ShaderLoader.loadVertex(t,u.RasterTileShader.vertexSource),s=h.ShaderLoader.loadFragment(t,u.RasterTileShader.fragmentSource),i=t.createProgram();t.attachShader(i,a),t.attachShader(i,s),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||console.error("Failed to setup shaders"),this._shaderProgram=i}},{key:"render",value:function(t,a){var s=this._gl,i=this._shaderProgram;s.useProgram(i),s.viewport(0,0,s.viewportWidth,s.viewportHeight),s.clearColor(0,0,0,1),s.enable(s.CULL_FACE),this._uploadModels(a),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),t.forEach(function(t){t.render(s,i)})}},{key:"_uploadModels",value:function(t){var a=this._gl,s=this._shaderProgram,i=a.getUniformLocation(s,"uMVMatrix"),n=a.getUniformLocation(s,"uPMatrix"),e=o["default"].mat4.create(),r=o["default"].mat4.create();o["default"].mat4.perspective(r,60*Math.PI/180,a.viewportWidth/a.viewportHeight,.001,18*l),o["default"].mat4.identity(e),o["default"].mat4.lookAt(e,t.eye,t.center,t.up),a.uniformMatrix4fv(i,!1,e),a.uniformMatrix4fv(n,!1,r)}}]),t}()},function(t,a){"use strict";function s(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,a){for(var s=0;s<a.length;s++){var i=a[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,s,i){return s&&t(a.prototype,s),i&&t(a,i),a}}();a.Tile=function(){function t(a){s(this,t),this._mesh=a.mesh,this._material=a.material}return i(t,[{key:"render",value:function(t,a){this._mesh.setup(t),this._material.setup(t);var s=a,i={};i.vertexPositionAttributeLoc=t.getAttribLocation(s,"aVertexPosition"),i.vertexTextureAttributeLoc=t.getAttribLocation(s,"aTextureCoordinates"),i.uniformSamplerLoc=t.getUniformLocation(s,"uSampler"),t.enableVertexAttribArray(i.vertexPositionAttributeLoc),t.enableVertexAttribArray(i.vertexTextureAttributeLoc),this._mesh.bindPoint(t,i.vertexPositionAttributeLoc),this._mesh.bindTexture(t,i.vertexTextureAttributeLoc),this._mesh.bindIndex(t),t.uniform1i(i.uniformSamplerLoc,0),this._material.bind(t,t.TEXTURE0),t.drawElements(t.TRIANGLES,this._mesh.triangleCount,t.UNSIGNED_SHORT,0),this._material.unBind(t)}}]),t}()},function(t,a){"use strict";function s(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,a){for(var s=0;s<a.length;s++){var i=a[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,s,i){return s&&t(a.prototype,s),i&&t(a,i),a}}();a.RasterTileShader=function(){function t(){s(this,t)}return i(t,null,[{key:"vertexSource",get:function(){
return"\n          attribute vec3 aVertexPosition;\n          attribute vec2 aTextureCoordinates;\n\n          uniform mat4 uMVMatrix;\n          uniform mat4 uPMatrix;\n\n          varying vec2 vTextureCoordinates;\n\n          void main() {\n            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n            vTextureCoordinates = aTextureCoordinates;  \n          } \n        "}},{key:"fragmentSource",get:function(){return"\n          precision mediump float;\n\n          varying vec2 vTextureCoordinates;\n          uniform sampler2D uSampler;\n          void main() {\n            gl_FragColor = texture2D(uSampler, vTextureCoordinates);\n          } \n        "}}]),t}()},function(t,a){"use strict";function s(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,a){for(var s=0;s<a.length;s++){var i=a[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,s,i){return s&&t(a.prototype,s),i&&t(a,i),a}}(),n={FRAGMENT:Symbol(),VERTEX:Symbol()};a.ShaderLoader=function(){function t(){s(this,t)}return i(t,null,[{key:"loadVertex",value:function(t,a){return this.load(t,a,n.VERTEX)}},{key:"loadFragment",value:function(t,a){return this.load(t,a,n.FRAGMENT)}},{key:"load",value:function(t,a,s){var i=null;if(s===n.FRAGMENT)i=t.createShader(t.FRAGMENT_SHADER);else{if(s!==n.VERTEX)return console.error("invalid shader type: "+s),null;i=t.createShader(t.VERTEX_SHADER)}return t.shaderSource(i,a),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(console.error(t.getShaderInfoLog(i)),null)}}]),t}()},function(t,a,s){"use strict";function i(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0}),a.SourceLayer=void 0;var n=function(){function t(t,a){for(var s=0;s<a.length;s++){var i=a[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,s,i){return s&&t(a.prototype,s),i&&t(a,i),a}}(),e=s(11),r=s(19);a.SourceLayer=function(){function t(){i(this,t)}return n(t,null,[{key:"from",value:function(t,a){return new e.RasterTileLayer({source:new r.TileSource(a.url),view:{zoom:3},context:t})}}]),t}()},function(t,a,s){"use strict";function i(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function n(t,a){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?t:a}function e(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(t,a):t.__proto__=a)}Object.defineProperty(a,"__esModule",{value:!0}),a.TileSource=void 0;var r=function(){function t(t,a){for(var s=0;s<a.length;s++){var i=a[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,s,i){return s&&t(a.prototype,s),i&&t(a,i),a}}(),o=s(20);a.TileSource=function(t){function a(t){i(this,a);var s=n(this,Object.getPrototypeOf(a).call(this));return s._url=t,s._images={},s._imageLoading={},s}return e(a,t),r(a,[{key:"getTileImage",value:function(t,a,s){var i=t+"-"+a+"-"+s;if(this._images[i])return this._images[i];if(this._imageLoading[i])return null;var n=this._url.replace("{x}",s).replace("{y}",a).replace("{z}",t);return new Promise(function(t){var a=new Image;a.crossOrigin="Anonymous",a.onload=function(){t(a)},a.onerror=function(){reject("error")},a.src=n}).then(function(n){this._images[i]=n,delete this._imageLoading[i],this.trigger("change",{zoom:t,row:a,col:s,image:n})}.bind(this)),this._imageLoading[i]=!0,null}}]),a}(o.Observable)},function(t,a){"use strict";function s(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,a){for(var s=0;s<a.length;s++){var i=a[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,s,i){return s&&t(a.prototype,s),i&&t(a,i),a}}();a.Observable=function(){function t(){s(this,t)}return i(t,[{key:"on",value:function(t,a){return this._listens=this._listens||{},this._listens[t]=this._listens[t]||[],this._listens[t].push(a),this}},{key:"un",value:function(t,a){if(!t)return this;if(!this.hasListens(t))return this;if(a){var s=this._listens[t].indexOf(a);s>=0&&this._listens[t].splice(s,1),this._listens[t].length||delete this._listens[t]}else delete this._listens[t];return this}},{key:"unAll",value:function(){return delete this._listens,this}},{key:"once",value:function(t,a){var s=function(i){this.un(t,s),a.call(this,i)}.bind(this);return this.on(t,s),this}},{key:"trigger",value:function(t,a){if(!this.hasListens(t))return this;var s={};Object.assign(s,a),Object.assign(s,{type:t,target:this});var i=this._listens[t].slice();return i.forEach(function(t){t.call(this,s)},this),this}},{key:"hasListens",value:function(t){return!(!this._listens||!this._listens[t])}}]),t}()},function(t,a,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0}),a.Proj=void 0;var e=function(){function t(t,a){for(var s=0;s<a.length;s++){var i=a[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,s,i){return s&&t(a.prototype,s),i&&t(a,i),a}}(),r=s(27),o=i(r),h="+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +a=6378137 +b=6378137 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",u=(0,o["default"])(h);a.Proj=function(){function t(){n(this,t)}return e(t,null,[{key:"mercator2Wgs84",value:function(t,a){var s=u.inverse([t,a]);return{lat:s[1],lng:s[0]}}}]),t}()},function(t,a,s){var i=s(1),n={};n.create=function(){var t=new i.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.clone=function(t){var a=new i.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.fromValues=function(t,a,s,n){var e=new i.ARRAY_TYPE(4);return e[0]=t,e[1]=a,e[2]=s,e[3]=n,e},n.set=function(t,a,s,i,n){return t[0]=a,t[1]=s,t[2]=i,t[3]=n,t},n.transpose=function(t,a){if(t===a){var s=a[1];t[1]=a[2],t[2]=s}else t[0]=a[0],t[1]=a[2],t[2]=a[1],t[3]=a[3];return t},n.invert=function(t,a){var s=a[0],i=a[1],n=a[2],e=a[3],r=s*e-n*i;return r?(r=1/r,t[0]=e*r,t[1]=-i*r,t[2]=-n*r,t[3]=s*r,t):null},n.adjoint=function(t,a){var s=a[0];return t[0]=a[3],t[1]=-a[1],t[2]=-a[2],t[3]=s,t},n.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},n.multiply=function(t,a,s){var i=a[0],n=a[1],e=a[2],r=a[3],o=s[0],h=s[1],u=s[2],l=s[3];return t[0]=i*o+e*h,t[1]=n*o+r*h,t[2]=i*u+e*l,t[3]=n*u+r*l,t},n.mul=n.multiply,n.rotate=function(t,a,s){var i=a[0],n=a[1],e=a[2],r=a[3],o=Math.sin(s),h=Math.cos(s);return t[0]=i*h+e*o,t[1]=n*h+r*o,t[2]=i*-o+e*h,t[3]=n*-o+r*h,t},n.scale=function(t,a,s){var i=a[0],n=a[1],e=a[2],r=a[3],o=s[0],h=s[1];return t[0]=i*o,t[1]=n*o,t[2]=e*h,t[3]=r*h,t},n.fromRotation=function(t,a){var s=Math.sin(a),i=Math.cos(a);return t[0]=i,t[1]=s,t[2]=-s,t[3]=i,t},n.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t},n.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},n.LDU=function(t,a,s,i){return t[2]=i[2]/i[0],s[0]=i[0],s[1]=i[1],s[3]=i[3]-t[2]*s[1],[t,a,s]},n.add=function(t,a,s){return t[0]=a[0]+s[0],t[1]=a[1]+s[1],t[2]=a[2]+s[2],t[3]=a[3]+s[3],t},n.subtract=function(t,a,s){return t[0]=a[0]-s[0],t[1]=a[1]-s[1],t[2]=a[2]-s[2],t[3]=a[3]-s[3],t},n.sub=n.subtract,n.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]},n.equals=function(t,a){var s=t[0],n=t[1],e=t[2],r=t[3],o=a[0],h=a[1],u=a[2],l=a[3];return Math.abs(s-o)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(o))&&Math.abs(n-h)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(e-u)<=i.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(r-l)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))},n.multiplyScalar=function(t,a,s){return t[0]=a[0]*s,t[1]=a[1]*s,t[2]=a[2]*s,t[3]=a[3]*s,t},n.multiplyScalarAndAdd=function(t,a,s,i){return t[0]=a[0]+s[0]*i,t[1]=a[1]+s[1]*i,t[2]=a[2]+s[2]*i,t[3]=a[3]+s[3]*i,t},t.exports=n},function(t,a,s){var i=s(1),n={};n.create=function(){var t=new i.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.clone=function(t){var a=new i.ARRAY_TYPE(6);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.fromValues=function(t,a,s,n,e,r){var o=new i.ARRAY_TYPE(6);return o[0]=t,o[1]=a,o[2]=s,o[3]=n,o[4]=e,o[5]=r,o},n.set=function(t,a,s,i,n,e,r){return t[0]=a,t[1]=s,t[2]=i,t[3]=n,t[4]=e,t[5]=r,t},n.invert=function(t,a){var s=a[0],i=a[1],n=a[2],e=a[3],r=a[4],o=a[5],h=s*e-i*n;return h?(h=1/h,t[0]=e*h,t[1]=-i*h,t[2]=-n*h,t[3]=s*h,t[4]=(n*o-e*r)*h,t[5]=(i*r-s*o)*h,t):null},n.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},n.multiply=function(t,a,s){var i=a[0],n=a[1],e=a[2],r=a[3],o=a[4],h=a[5],u=s[0],l=s[1],c=s[2],M=s[3],f=s[4],m=s[5];return t[0]=i*u+e*l,t[1]=n*u+r*l,t[2]=i*c+e*M,t[3]=n*c+r*M,t[4]=i*f+e*m+o,t[5]=n*f+r*m+h,t},n.mul=n.multiply,n.rotate=function(t,a,s){var i=a[0],n=a[1],e=a[2],r=a[3],o=a[4],h=a[5],u=Math.sin(s),l=Math.cos(s);return t[0]=i*l+e*u,t[1]=n*l+r*u,t[2]=i*-u+e*l,t[3]=n*-u+r*l,t[4]=o,t[5]=h,t},n.scale=function(t,a,s){var i=a[0],n=a[1],e=a[2],r=a[3],o=a[4],h=a[5],u=s[0],l=s[1];return t[0]=i*u,t[1]=n*u,t[2]=e*l,t[3]=r*l,t[4]=o,t[5]=h,t},n.translate=function(t,a,s){var i=a[0],n=a[1],e=a[2],r=a[3],o=a[4],h=a[5],u=s[0],l=s[1];return t[0]=i,t[1]=n,t[2]=e,t[3]=r,t[4]=i*u+e*l+o,t[5]=n*u+r*l+h,t},n.fromRotation=function(t,a){var s=Math.sin(a),i=Math.cos(a);return t[0]=i,t[1]=s,t[2]=-s,t[3]=i,t[4]=0,t[5]=0,t},n.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t[4]=0,t[5]=0,t},n.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=a[0],t[5]=a[1],t},n.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},n.add=function(t,a,s){return t[0]=a[0]+s[0],t[1]=a[1]+s[1],t[2]=a[2]+s[2],t[3]=a[3]+s[3],t[4]=a[4]+s[4],t[5]=a[5]+s[5],t},n.subtract=function(t,a,s){return t[0]=a[0]-s[0],t[1]=a[1]-s[1],t[2]=a[2]-s[2],t[3]=a[3]-s[3],t[4]=a[4]-s[4],t[5]=a[5]-s[5],t},n.sub=n.subtract,n.multiplyScalar=function(t,a,s){return t[0]=a[0]*s,t[1]=a[1]*s,t[2]=a[2]*s,t[3]=a[3]*s,t[4]=a[4]*s,t[5]=a[5]*s,t},n.multiplyScalarAndAdd=function(t,a,s,i){return t[0]=a[0]+s[0]*i,t[1]=a[1]+s[1]*i,t[2]=a[2]+s[2]*i,t[3]=a[3]+s[3]*i,t[4]=a[4]+s[4]*i,t[5]=a[5]+s[5]*i,t},n.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]},n.equals=function(t,a){var s=t[0],n=t[1],e=t[2],r=t[3],o=t[4],h=t[5],u=a[0],l=a[1],c=a[2],M=a[3],f=a[4],m=a[5];return Math.abs(s-u)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(n-l)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(e-c)<=i.EPSILON*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(r-M)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(o-f)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(h-m)<=i.EPSILON*Math.max(1,Math.abs(h),Math.abs(m))},t.exports=n},function(t,a,s){var i=s(1),n={scalar:{},SIMD:{}};n.create=function(){var t=new i.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.clone=function(t){var a=new i.ARRAY_TYPE(16);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],a},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},n.fromValues=function(t,a,s,n,e,r,o,h,u,l,c,M,f,m,d,p){var _=new i.ARRAY_TYPE(16);return _[0]=t,_[1]=a,_[2]=s,_[3]=n,_[4]=e,_[5]=r,_[6]=o,_[7]=h,_[8]=u,_[9]=l,_[10]=c,_[11]=M,_[12]=f,_[13]=m,_[14]=d,_[15]=p,_},n.set=function(t,a,s,i,n,e,r,o,h,u,l,c,M,f,m,d,p){return t[0]=a,t[1]=s,t[2]=i,t[3]=n,t[4]=e,t[5]=r,t[6]=o,t[7]=h,t[8]=u,t[9]=l,t[10]=c,t[11]=M,t[12]=f,t[13]=m,t[14]=d,t[15]=p,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.scalar.transpose=function(t,a){if(t===a){var s=a[1],i=a[2],n=a[3],e=a[6],r=a[7],o=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=s,t[6]=a[9],t[7]=a[13],t[8]=i,t[9]=e,t[11]=a[14],t[12]=n,t[13]=r,t[14]=o}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t},n.SIMD.transpose=function(t,a){var s,i,n,e,r,o,h,u,l,c;return s=SIMD.Float32x4.load(a,0),i=SIMD.Float32x4.load(a,4),n=SIMD.Float32x4.load(a,8),e=SIMD.Float32x4.load(a,12),r=SIMD.Float32x4.shuffle(s,i,0,1,4,5),o=SIMD.Float32x4.shuffle(n,e,0,1,4,5),h=SIMD.Float32x4.shuffle(r,o,0,2,4,6),u=SIMD.Float32x4.shuffle(r,o,1,3,5,7),SIMD.Float32x4.store(t,0,h),SIMD.Float32x4.store(t,4,u),r=SIMD.Float32x4.shuffle(s,i,2,3,6,7),o=SIMD.Float32x4.shuffle(n,e,2,3,6,7),l=SIMD.Float32x4.shuffle(r,o,0,2,4,6),c=SIMD.Float32x4.shuffle(r,o,1,3,5,7),SIMD.Float32x4.store(t,8,l),SIMD.Float32x4.store(t,12,c),t},n.transpose=i.USE_SIMD?n.SIMD.transpose:n.scalar.transpose,n.scalar.invert=function(t,a){var s=a[0],i=a[1],n=a[2],e=a[3],r=a[4],o=a[5],h=a[6],u=a[7],l=a[8],c=a[9],M=a[10],f=a[11],m=a[12],d=a[13],p=a[14],_=a[15],x=s*o-i*r,v=s*h-n*r,b=s*u-e*r,y=i*h-n*o,S=i*u-e*o,I=n*u-e*h,g=l*d-c*m,D=l*p-M*m,F=l*_-f*m,w=c*p-M*d,E=c*_-f*d,P=M*_-f*p,A=x*P-v*E+b*w+y*F-S*D+I*g;return A?(A=1/A,t[0]=(o*P-h*E+u*w)*A,t[1]=(n*E-i*P-e*w)*A,t[2]=(d*I-p*S+_*y)*A,t[3]=(M*S-c*I-f*y)*A,t[4]=(h*F-r*P-u*D)*A,t[5]=(s*P-n*F+e*D)*A,t[6]=(p*b-m*I-_*v)*A,t[7]=(l*I-M*b+f*v)*A,t[8]=(r*E-o*F+u*g)*A,t[9]=(i*F-s*E-e*g)*A,t[10]=(m*S-d*b+_*x)*A,t[11]=(c*b-l*S-f*x)*A,t[12]=(o*D-r*w-h*g)*A,t[13]=(s*w-i*D+n*g)*A,t[14]=(d*v-m*y-p*x)*A,t[15]=(l*y-c*v+M*x)*A,t):null},n.SIMD.invert=function(t,a){var s,i,n,e,r,o,h,u,l,c,M=SIMD.Float32x4.load(a,0),f=SIMD.Float32x4.load(a,4),m=SIMD.Float32x4.load(a,8),d=SIMD.Float32x4.load(a,12);return r=SIMD.Float32x4.shuffle(M,f,0,1,4,5),i=SIMD.Float32x4.shuffle(m,d,0,1,4,5),s=SIMD.Float32x4.shuffle(r,i,0,2,4,6),i=SIMD.Float32x4.shuffle(i,r,1,3,5,7),r=SIMD.Float32x4.shuffle(M,f,2,3,6,7),e=SIMD.Float32x4.shuffle(m,d,2,3,6,7),n=SIMD.Float32x4.shuffle(r,e,0,2,4,6),e=SIMD.Float32x4.shuffle(e,r,1,3,5,7),r=SIMD.Float32x4.mul(n,e),r=SIMD.Float32x4.swizzle(r,1,0,3,2),o=SIMD.Float32x4.mul(i,r),h=SIMD.Float32x4.mul(s,r),r=SIMD.Float32x4.swizzle(r,2,3,0,1),o=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,r),o),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,r),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),r=SIMD.Float32x4.mul(i,n),r=SIMD.Float32x4.swizzle(r,1,0,3,2),o=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,r),o),l=SIMD.Float32x4.mul(s,r),r=SIMD.Float32x4.swizzle(r,2,3,0,1),o=SIMD.Float32x4.sub(o,SIMD.Float32x4.mul(e,r)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,r),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),r=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,2,3,0,1),e),r=SIMD.Float32x4.swizzle(r,1,0,3,2),n=SIMD.Float32x4.swizzle(n,2,3,0,1),o=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,r),o),u=SIMD.Float32x4.mul(s,r),r=SIMD.Float32x4.swizzle(r,2,3,0,1),o=SIMD.Float32x4.sub(o,SIMD.Float32x4.mul(n,r)),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,r),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),r=SIMD.Float32x4.mul(s,i),r=SIMD.Float32x4.swizzle(r,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,r),u),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,r),l),r=SIMD.Float32x4.swizzle(r,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,r),u),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(n,r)),r=SIMD.Float32x4.mul(s,e),r=SIMD.Float32x4.swizzle(r,1,0,3,2),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(n,r)),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,r),u),r=SIMD.Float32x4.swizzle(r,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,r),h),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(i,r)),r=SIMD.Float32x4.mul(s,n),r=SIMD.Float32x4.swizzle(r,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,r),h),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(i,r)),r=SIMD.Float32x4.swizzle(r,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(e,r)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,r),l),c=SIMD.Float32x4.mul(s,o),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,2,3,0,1),c),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,1,0,3,2),c),r=SIMD.Float32x4.reciprocalApproximation(c),c=SIMD.Float32x4.sub(SIMD.Float32x4.add(r,r),SIMD.Float32x4.mul(c,SIMD.Float32x4.mul(r,r))),(c=SIMD.Float32x4.swizzle(c,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(c,o)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(c,h)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(c,u)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(c,l)),t):null},n.invert=i.USE_SIMD?n.SIMD.invert:n.scalar.invert,n.scalar.adjoint=function(t,a){var s=a[0],i=a[1],n=a[2],e=a[3],r=a[4],o=a[5],h=a[6],u=a[7],l=a[8],c=a[9],M=a[10],f=a[11],m=a[12],d=a[13],p=a[14],_=a[15];return t[0]=o*(M*_-f*p)-c*(h*_-u*p)+d*(h*f-u*M),t[1]=-(i*(M*_-f*p)-c*(n*_-e*p)+d*(n*f-e*M)),t[2]=i*(h*_-u*p)-o*(n*_-e*p)+d*(n*u-e*h),t[3]=-(i*(h*f-u*M)-o*(n*f-e*M)+c*(n*u-e*h)),t[4]=-(r*(M*_-f*p)-l*(h*_-u*p)+m*(h*f-u*M)),t[5]=s*(M*_-f*p)-l*(n*_-e*p)+m*(n*f-e*M),t[6]=-(s*(h*_-u*p)-r*(n*_-e*p)+m*(n*u-e*h)),t[7]=s*(h*f-u*M)-r*(n*f-e*M)+l*(n*u-e*h),t[8]=r*(c*_-f*d)-l*(o*_-u*d)+m*(o*f-u*c),t[9]=-(s*(c*_-f*d)-l*(i*_-e*d)+m*(i*f-e*c)),t[10]=s*(o*_-u*d)-r*(i*_-e*d)+m*(i*u-e*o),t[11]=-(s*(o*f-u*c)-r*(i*f-e*c)+l*(i*u-e*o)),t[12]=-(r*(c*p-M*d)-l*(o*p-h*d)+m*(o*M-h*c)),t[13]=s*(c*p-M*d)-l*(i*p-n*d)+m*(i*M-n*c),t[14]=-(s*(o*p-h*d)-r*(i*p-n*d)+m*(i*h-n*o)),t[15]=s*(o*M-h*c)-r*(i*M-n*c)+l*(i*h-n*o),t},n.SIMD.adjoint=function(t,a){var s,i,n,e,r,o,h,u,l,c,M,f,m,s=SIMD.Float32x4.load(a,0),i=SIMD.Float32x4.load(a,4),n=SIMD.Float32x4.load(a,8),e=SIMD.Float32x4.load(a,12);return l=SIMD.Float32x4.shuffle(s,i,0,1,4,5),o=SIMD.Float32x4.shuffle(n,e,0,1,4,5),r=SIMD.Float32x4.shuffle(l,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,l,1,3,5,7),l=SIMD.Float32x4.shuffle(s,i,2,3,6,7),u=SIMD.Float32x4.shuffle(n,e,2,3,6,7),h=SIMD.Float32x4.shuffle(l,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,l,1,3,5,7),l=SIMD.Float32x4.mul(h,u),l=SIMD.Float32x4.swizzle(l,1,0,3,2),c=SIMD.Float32x4.mul(o,l),M=SIMD.Float32x4.mul(r,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,l),c),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,l),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),l=SIMD.Float32x4.mul(o,h),l=SIMD.Float32x4.swizzle(l,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,l),c),m=SIMD.Float32x4.mul(r,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(u,l)),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,l),m),m=SIMD.Float32x4.swizzle(m,2,3,0,1),l=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(o,2,3,0,1),u),l=SIMD.Float32x4.swizzle(l,1,0,3,2),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,l),c),f=SIMD.Float32x4.mul(r,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(h,l)),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,l),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),l=SIMD.Float32x4.mul(r,o),l=SIMD.Float32x4.swizzle(l,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,l),f),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,l),m),l=SIMD.Float32x4.swizzle(l,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,l),f),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(h,l)),l=SIMD.Float32x4.mul(r,u),l=SIMD.Float32x4.swizzle(l,1,0,3,2),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(h,l)),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,l),f),l=SIMD.Float32x4.swizzle(l,2,3,0,1),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,l),M),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(o,l)),l=SIMD.Float32x4.mul(r,h),l=SIMD.Float32x4.swizzle(l,1,0,3,2),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,l),M),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(o,l)),l=SIMD.Float32x4.swizzle(l,2,3,0,1),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(u,l)),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,l),m),SIMD.Float32x4.store(t,0,c),SIMD.Float32x4.store(t,4,M),SIMD.Float32x4.store(t,8,f),SIMD.Float32x4.store(t,12,m),t},n.adjoint=i.USE_SIMD?n.SIMD.adjoint:n.scalar.adjoint,n.determinant=function(t){var a=t[0],s=t[1],i=t[2],n=t[3],e=t[4],r=t[5],o=t[6],h=t[7],u=t[8],l=t[9],c=t[10],M=t[11],f=t[12],m=t[13],d=t[14],p=t[15],_=a*r-s*e,x=a*o-i*e,v=a*h-n*e,b=s*o-i*r,y=s*h-n*r,S=i*h-n*o,I=u*m-l*f,g=u*d-c*f,D=u*p-M*f,F=l*d-c*m,w=l*p-M*m,E=c*p-M*d;return _*E-x*w+v*F+b*D-y*g+S*I},n.SIMD.multiply=function(t,a,s){var i=SIMD.Float32x4.load(a,0),n=SIMD.Float32x4.load(a,4),e=SIMD.Float32x4.load(a,8),r=SIMD.Float32x4.load(a,12),o=SIMD.Float32x4.load(s,0),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(o,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(o,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(o,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(o,3,3,3,3),r))));SIMD.Float32x4.store(t,0,h);var u=SIMD.Float32x4.load(s,4),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),r))));SIMD.Float32x4.store(t,4,l);var c=SIMD.Float32x4.load(s,8),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),r))));SIMD.Float32x4.store(t,8,M);var f=SIMD.Float32x4.load(s,12),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),r))));return SIMD.Float32x4.store(t,12,m),t},n.scalar.multiply=function(t,a,s){var i=a[0],n=a[1],e=a[2],r=a[3],o=a[4],h=a[5],u=a[6],l=a[7],c=a[8],M=a[9],f=a[10],m=a[11],d=a[12],p=a[13],_=a[14],x=a[15],v=s[0],b=s[1],y=s[2],S=s[3];return t[0]=v*i+b*o+y*c+S*d,t[1]=v*n+b*h+y*M+S*p,t[2]=v*e+b*u+y*f+S*_,t[3]=v*r+b*l+y*m+S*x,v=s[4],b=s[5],y=s[6],S=s[7],t[4]=v*i+b*o+y*c+S*d,t[5]=v*n+b*h+y*M+S*p,t[6]=v*e+b*u+y*f+S*_,t[7]=v*r+b*l+y*m+S*x,v=s[8],b=s[9],y=s[10],S=s[11],t[8]=v*i+b*o+y*c+S*d,t[9]=v*n+b*h+y*M+S*p,t[10]=v*e+b*u+y*f+S*_,t[11]=v*r+b*l+y*m+S*x,v=s[12],b=s[13],y=s[14],S=s[15],t[12]=v*i+b*o+y*c+S*d,t[13]=v*n+b*h+y*M+S*p,t[14]=v*e+b*u+y*f+S*_,t[15]=v*r+b*l+y*m+S*x,t},n.multiply=i.USE_SIMD?n.SIMD.multiply:n.scalar.multiply,n.mul=n.multiply,n.scalar.translate=function(t,a,s){var i,n,e,r,o,h,u,l,c,M,f,m,d=s[0],p=s[1],_=s[2];return a===t?(t[12]=a[0]*d+a[4]*p+a[8]*_+a[12],t[13]=a[1]*d+a[5]*p+a[9]*_+a[13],t[14]=a[2]*d+a[6]*p+a[10]*_+a[14],t[15]=a[3]*d+a[7]*p+a[11]*_+a[15]):(i=a[0],n=a[1],e=a[2],r=a[3],o=a[4],h=a[5],u=a[6],l=a[7],c=a[8],M=a[9],f=a[10],m=a[11],t[0]=i,t[1]=n,t[2]=e,t[3]=r,t[4]=o,t[5]=h,t[6]=u,t[7]=l,t[8]=c,t[9]=M,t[10]=f,t[11]=m,t[12]=i*d+o*p+c*_+a[12],t[13]=n*d+h*p+M*_+a[13],t[14]=e*d+u*p+f*_+a[14],t[15]=r*d+l*p+m*_+a[15]),t},n.SIMD.translate=function(t,a,s){var i=SIMD.Float32x4.load(a,0),n=SIMD.Float32x4.load(a,4),e=SIMD.Float32x4.load(a,8),r=SIMD.Float32x4.load(a,12),o=SIMD.Float32x4(s[0],s[1],s[2],0);a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11]),i=SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(o,0,0,0,0)),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(o,1,1,1,1)),e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(o,2,2,2,2));var h=SIMD.Float32x4.add(i,SIMD.Float32x4.add(n,SIMD.Float32x4.add(e,r)));return SIMD.Float32x4.store(t,12,h),t},n.translate=i.USE_SIMD?n.SIMD.translate:n.scalar.translate,n.scalar.scale=function(t,a,s){var i=s[0],n=s[1],e=s[2];return t[0]=a[0]*i,t[1]=a[1]*i,t[2]=a[2]*i,t[3]=a[3]*i,t[4]=a[4]*n,t[5]=a[5]*n,t[6]=a[6]*n,t[7]=a[7]*n,t[8]=a[8]*e,t[9]=a[9]*e,t[10]=a[10]*e,t[11]=a[11]*e,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},n.SIMD.scale=function(t,a,s){var i,n,e,r=SIMD.Float32x4(s[0],s[1],s[2],0);return i=SIMD.Float32x4.load(a,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(r,0,0,0,0))),n=SIMD.Float32x4.load(a,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(r,1,1,1,1))),e=SIMD.Float32x4.load(a,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(r,2,2,2,2))),t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},n.scale=i.USE_SIMD?n.SIMD.scale:n.scalar.scale,n.rotate=function(t,a,s,n){var e,r,o,h,u,l,c,M,f,m,d,p,_,x,v,b,y,S,I,g,D,F,w,E,P=n[0],A=n[1],z=n[2],j=Math.sqrt(P*P+A*A+z*z);return Math.abs(j)<i.EPSILON?null:(j=1/j,P*=j,A*=j,z*=j,e=Math.sin(s),r=Math.cos(s),o=1-r,h=a[0],u=a[1],l=a[2],c=a[3],M=a[4],f=a[5],m=a[6],d=a[7],p=a[8],_=a[9],x=a[10],v=a[11],b=P*P*o+r,y=A*P*o+z*e,S=z*P*o-A*e,I=P*A*o-z*e,g=A*A*o+r,D=z*A*o+P*e,F=P*z*o+A*e,w=A*z*o-P*e,E=z*z*o+r,t[0]=h*b+M*y+p*S,t[1]=u*b+f*y+_*S,t[2]=l*b+m*y+x*S,t[3]=c*b+d*y+v*S,t[4]=h*I+M*g+p*D,t[5]=u*I+f*g+_*D,t[6]=l*I+m*g+x*D,t[7]=c*I+d*g+v*D,t[8]=h*F+M*w+p*E,t[9]=u*F+f*w+_*E,t[10]=l*F+m*w+x*E,t[11]=c*F+d*w+v*E,a!==t&&(t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t)},n.scalar.rotateX=function(t,a,s){var i=Math.sin(s),n=Math.cos(s),e=a[4],r=a[5],o=a[6],h=a[7],u=a[8],l=a[9],c=a[10],M=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=e*n+u*i,t[5]=r*n+l*i,t[6]=o*n+c*i,t[7]=h*n+M*i,t[8]=u*n-e*i,t[9]=l*n-r*i,t[10]=c*n-o*i,t[11]=M*n-h*i,t},n.SIMD.rotateX=function(t,a,s){var i=SIMD.Float32x4.splat(Math.sin(s)),n=SIMD.Float32x4.splat(Math.cos(s));a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var e=SIMD.Float32x4.load(a,4),r=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,n),SIMD.Float32x4.mul(r,i))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,n),SIMD.Float32x4.mul(e,i))),t},n.rotateX=i.USE_SIMD?n.SIMD.rotateX:n.scalar.rotateX,n.scalar.rotateY=function(t,a,s){var i=Math.sin(s),n=Math.cos(s),e=a[0],r=a[1],o=a[2],h=a[3],u=a[8],l=a[9],c=a[10],M=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=e*n-u*i,t[1]=r*n-l*i,t[2]=o*n-c*i,t[3]=h*n-M*i,t[8]=e*i+u*n,t[9]=r*i+l*n,t[10]=o*i+c*n,t[11]=h*i+M*n,t},n.SIMD.rotateY=function(t,a,s){var i=SIMD.Float32x4.splat(Math.sin(s)),n=SIMD.Float32x4.splat(Math.cos(s));a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var e=SIMD.Float32x4.load(a,0),r=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,n),SIMD.Float32x4.mul(r,i))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,i),SIMD.Float32x4.mul(r,n))),t},n.rotateY=i.USE_SIMD?n.SIMD.rotateY:n.scalar.rotateY,n.scalar.rotateZ=function(t,a,s){var i=Math.sin(s),n=Math.cos(s),e=a[0],r=a[1],o=a[2],h=a[3],u=a[4],l=a[5],c=a[6],M=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=e*n+u*i,t[1]=r*n+l*i,t[2]=o*n+c*i,t[3]=h*n+M*i,t[4]=u*n-e*i,t[5]=l*n-r*i,t[6]=c*n-o*i,t[7]=M*n-h*i,t},n.SIMD.rotateZ=function(t,a,s){var i=SIMD.Float32x4.splat(Math.sin(s)),n=SIMD.Float32x4.splat(Math.cos(s));a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var e=SIMD.Float32x4.load(a,0),r=SIMD.Float32x4.load(a,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,n),SIMD.Float32x4.mul(r,i))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,n),SIMD.Float32x4.mul(e,i))),t},n.rotateZ=i.USE_SIMD?n.SIMD.rotateZ:n.scalar.rotateZ,n.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t},n.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotation=function(t,a,s){var n,e,r,o=s[0],h=s[1],u=s[2],l=Math.sqrt(o*o+h*h+u*u);return Math.abs(l)<i.EPSILON?null:(l=1/l,o*=l,h*=l,u*=l,n=Math.sin(a),e=Math.cos(a),r=1-e,t[0]=o*o*r+e,t[1]=h*o*r+u*n,t[2]=u*o*r-h*n,t[3]=0,t[4]=o*h*r-u*n,t[5]=h*h*r+e,t[6]=u*h*r+o*n,t[7]=0,t[8]=o*u*r+h*n,t[9]=h*u*r-o*n,t[10]=u*u*r+e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},n.fromXRotation=function(t,a){var s=Math.sin(a),i=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=s,t[7]=0,t[8]=0,t[9]=-s,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromYRotation=function(t,a){var s=Math.sin(a),i=Math.cos(a);return t[0]=i,t[1]=0,t[2]=-s,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=s,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromZRotation=function(t,a){var s=Math.sin(a),i=Math.cos(a);return t[0]=i,t[1]=s,t[2]=0,t[3]=0,t[4]=-s,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotationTranslation=function(t,a,s){var i=a[0],n=a[1],e=a[2],r=a[3],o=i+i,h=n+n,u=e+e,l=i*o,c=i*h,M=i*u,f=n*h,m=n*u,d=e*u,p=r*o,_=r*h,x=r*u;return t[0]=1-(f+d),t[1]=c+x,t[2]=M-_,t[3]=0,t[4]=c-x,t[5]=1-(l+d),t[6]=m+p,t[7]=0,t[8]=M+_,t[9]=m-p,t[10]=1-(l+f),t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},n.getTranslation=function(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t},n.getRotation=function(t,a){var s=a[0]+a[5]+a[10],i=0;return s>0?(i=2*Math.sqrt(s+1),t[3]=.25*i,t[0]=(a[6]-a[9])/i,t[1]=(a[8]-a[2])/i,t[2]=(a[1]-a[4])/i):a[0]>a[5]&a[0]>a[10]?(i=2*Math.sqrt(1+a[0]-a[5]-a[10]),t[3]=(a[6]-a[9])/i,t[0]=.25*i,t[1]=(a[1]+a[4])/i,t[2]=(a[8]+a[2])/i):a[5]>a[10]?(i=2*Math.sqrt(1+a[5]-a[0]-a[10]),t[3]=(a[8]-a[2])/i,t[0]=(a[1]+a[4])/i,t[1]=.25*i,t[2]=(a[6]+a[9])/i):(i=2*Math.sqrt(1+a[10]-a[0]-a[5]),t[3]=(a[1]-a[4])/i,t[0]=(a[8]+a[2])/i,t[1]=(a[6]+a[9])/i,t[2]=.25*i),t},n.fromRotationTranslationScale=function(t,a,s,i){var n=a[0],e=a[1],r=a[2],o=a[3],h=n+n,u=e+e,l=r+r,c=n*h,M=n*u,f=n*l,m=e*u,d=e*l,p=r*l,_=o*h,x=o*u,v=o*l,b=i[0],y=i[1],S=i[2];return t[0]=(1-(m+p))*b,t[1]=(M+v)*b,t[2]=(f-x)*b,t[3]=0,t[4]=(M-v)*y,t[5]=(1-(c+p))*y,t[6]=(d+_)*y,t[7]=0,t[8]=(f+x)*S,t[9]=(d-_)*S,t[10]=(1-(c+m))*S,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},n.fromRotationTranslationScaleOrigin=function(t,a,s,i,n){var e=a[0],r=a[1],o=a[2],h=a[3],u=e+e,l=r+r,c=o+o,M=e*u,f=e*l,m=e*c,d=r*l,p=r*c,_=o*c,x=h*u,v=h*l,b=h*c,y=i[0],S=i[1],I=i[2],g=n[0],D=n[1],F=n[2];return t[0]=(1-(d+_))*y,t[1]=(f+b)*y,t[2]=(m-v)*y,t[3]=0,t[4]=(f-b)*S,t[5]=(1-(M+_))*S,t[6]=(p+x)*S,t[7]=0,t[8]=(m+v)*I,t[9]=(p-x)*I,t[10]=(1-(M+d))*I,t[11]=0,t[12]=s[0]+g-(t[0]*g+t[4]*D+t[8]*F),t[13]=s[1]+D-(t[1]*g+t[5]*D+t[9]*F),t[14]=s[2]+F-(t[2]*g+t[6]*D+t[10]*F),t[15]=1,t},n.fromQuat=function(t,a){var s=a[0],i=a[1],n=a[2],e=a[3],r=s+s,o=i+i,h=n+n,u=s*r,l=i*r,c=i*o,M=n*r,f=n*o,m=n*h,d=e*r,p=e*o,_=e*h;return t[0]=1-c-m,t[1]=l+_,t[2]=M-p,t[3]=0,t[4]=l-_,t[5]=1-u-m,t[6]=f+d,t[7]=0,t[8]=M+p,
t[9]=f-d,t[10]=1-u-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.frustum=function(t,a,s,i,n,e,r){var o=1/(s-a),h=1/(n-i),u=1/(e-r);return t[0]=2*e*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*e*h,t[6]=0,t[7]=0,t[8]=(s+a)*o,t[9]=(n+i)*h,t[10]=(r+e)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=r*e*2*u,t[15]=0,t},n.perspective=function(t,a,s,i,n){var e=1/Math.tan(a/2),r=1/(i-n);return t[0]=e/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+i)*r,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*i*r,t[15]=0,t},n.perspectiveFromFieldOfView=function(t,a,s,i){var n=Math.tan(a.upDegrees*Math.PI/180),e=Math.tan(a.downDegrees*Math.PI/180),r=Math.tan(a.leftDegrees*Math.PI/180),o=Math.tan(a.rightDegrees*Math.PI/180),h=2/(r+o),u=2/(n+e);return t[0]=h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-((r-o)*h*.5),t[9]=(n-e)*u*.5,t[10]=i/(s-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*s/(s-i),t[15]=0,t},n.ortho=function(t,a,s,i,n,e,r){var o=1/(a-s),h=1/(i-n),u=1/(e-r);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(a+s)*o,t[13]=(n+i)*h,t[14]=(r+e)*u,t[15]=1,t},n.lookAt=function(t,a,s,e){var r,o,h,u,l,c,M,f,m,d,p=a[0],_=a[1],x=a[2],v=e[0],b=e[1],y=e[2],S=s[0],I=s[1],g=s[2];return Math.abs(p-S)<i.EPSILON&&Math.abs(_-I)<i.EPSILON&&Math.abs(x-g)<i.EPSILON?n.identity(t):(M=p-S,f=_-I,m=x-g,d=1/Math.sqrt(M*M+f*f+m*m),M*=d,f*=d,m*=d,r=b*m-y*f,o=y*M-v*m,h=v*f-b*M,d=Math.sqrt(r*r+o*o+h*h),d?(d=1/d,r*=d,o*=d,h*=d):(r=0,o=0,h=0),u=f*h-m*o,l=m*r-M*h,c=M*o-f*r,d=Math.sqrt(u*u+l*l+c*c),d?(d=1/d,u*=d,l*=d,c*=d):(u=0,l=0,c=0),t[0]=r,t[1]=u,t[2]=M,t[3]=0,t[4]=o,t[5]=l,t[6]=f,t[7]=0,t[8]=h,t[9]=c,t[10]=m,t[11]=0,t[12]=-(r*p+o*_+h*x),t[13]=-(u*p+l*_+c*x),t[14]=-(M*p+f*_+m*x),t[15]=1,t)},n.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},n.add=function(t,a,s){return t[0]=a[0]+s[0],t[1]=a[1]+s[1],t[2]=a[2]+s[2],t[3]=a[3]+s[3],t[4]=a[4]+s[4],t[5]=a[5]+s[5],t[6]=a[6]+s[6],t[7]=a[7]+s[7],t[8]=a[8]+s[8],t[9]=a[9]+s[9],t[10]=a[10]+s[10],t[11]=a[11]+s[11],t[12]=a[12]+s[12],t[13]=a[13]+s[13],t[14]=a[14]+s[14],t[15]=a[15]+s[15],t},n.subtract=function(t,a,s){return t[0]=a[0]-s[0],t[1]=a[1]-s[1],t[2]=a[2]-s[2],t[3]=a[3]-s[3],t[4]=a[4]-s[4],t[5]=a[5]-s[5],t[6]=a[6]-s[6],t[7]=a[7]-s[7],t[8]=a[8]-s[8],t[9]=a[9]-s[9],t[10]=a[10]-s[10],t[11]=a[11]-s[11],t[12]=a[12]-s[12],t[13]=a[13]-s[13],t[14]=a[14]-s[14],t[15]=a[15]-s[15],t},n.sub=n.subtract,n.multiplyScalar=function(t,a,s){return t[0]=a[0]*s,t[1]=a[1]*s,t[2]=a[2]*s,t[3]=a[3]*s,t[4]=a[4]*s,t[5]=a[5]*s,t[6]=a[6]*s,t[7]=a[7]*s,t[8]=a[8]*s,t[9]=a[9]*s,t[10]=a[10]*s,t[11]=a[11]*s,t[12]=a[12]*s,t[13]=a[13]*s,t[14]=a[14]*s,t[15]=a[15]*s,t},n.multiplyScalarAndAdd=function(t,a,s,i){return t[0]=a[0]+s[0]*i,t[1]=a[1]+s[1]*i,t[2]=a[2]+s[2]*i,t[3]=a[3]+s[3]*i,t[4]=a[4]+s[4]*i,t[5]=a[5]+s[5]*i,t[6]=a[6]+s[6]*i,t[7]=a[7]+s[7]*i,t[8]=a[8]+s[8]*i,t[9]=a[9]+s[9]*i,t[10]=a[10]+s[10]*i,t[11]=a[11]+s[11]*i,t[12]=a[12]+s[12]*i,t[13]=a[13]+s[13]*i,t[14]=a[14]+s[14]*i,t[15]=a[15]+s[15]*i,t},n.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]},n.equals=function(t,a){var s=t[0],n=t[1],e=t[2],r=t[3],o=t[4],h=t[5],u=t[6],l=t[7],c=t[8],M=t[9],f=t[10],m=t[11],d=t[12],p=t[13],_=t[14],x=t[15],v=a[0],b=a[1],y=a[2],S=a[3],I=a[4],g=a[5],D=a[6],F=a[7],w=a[8],E=a[9],P=a[10],A=a[11],z=a[12],j=a[13],N=a[14],T=a[15];return Math.abs(s-v)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(n-b)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(e-y)<=i.EPSILON*Math.max(1,Math.abs(e),Math.abs(y))&&Math.abs(r-S)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(S))&&Math.abs(o-I)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(I))&&Math.abs(h-g)<=i.EPSILON*Math.max(1,Math.abs(h),Math.abs(g))&&Math.abs(u-D)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(D))&&Math.abs(l-F)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(c-w)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(M-E)<=i.EPSILON*Math.max(1,Math.abs(M),Math.abs(E))&&Math.abs(f-P)<=i.EPSILON*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(m-A)<=i.EPSILON*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(d-z)<=i.EPSILON*Math.max(1,Math.abs(d),Math.abs(z))&&Math.abs(p-j)<=i.EPSILON*Math.max(1,Math.abs(p),Math.abs(j))&&Math.abs(_-N)<=i.EPSILON*Math.max(1,Math.abs(_),Math.abs(N))&&Math.abs(x-T)<=i.EPSILON*Math.max(1,Math.abs(x),Math.abs(T))},t.exports=n},function(t,a,s){var i=s(1),n=s(3),e=s(4),r=s(5),o={};o.create=function(){var t=new i.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},o.rotationTo=function(){var t=e.create(),a=e.fromValues(1,0,0),s=e.fromValues(0,1,0);return function(i,n,r){var h=e.dot(n,r);return h<-.999999?(e.cross(t,a,n),e.length(t)<1e-6&&e.cross(t,s,n),e.normalize(t,t),o.setAxisAngle(i,t,Math.PI),i):h>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(e.cross(t,n,r),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+h,o.normalize(i,i))}}(),o.setAxes=function(){var t=n.create();return function(a,s,i,n){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-s[0],t[5]=-s[1],t[8]=-s[2],o.normalize(a,o.fromMat3(a,t))}}(),o.clone=r.clone,o.fromValues=r.fromValues,o.copy=r.copy,o.set=r.set,o.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},o.setAxisAngle=function(t,a,s){s=.5*s;var i=Math.sin(s);return t[0]=i*a[0],t[1]=i*a[1],t[2]=i*a[2],t[3]=Math.cos(s),t},o.getAxisAngle=function(t,a){var s=2*Math.acos(a[3]),i=Math.sin(s/2);return 0!=i?(t[0]=a[0]/i,t[1]=a[1]/i,t[2]=a[2]/i):(t[0]=1,t[1]=0,t[2]=0),s},o.add=r.add,o.multiply=function(t,a,s){var i=a[0],n=a[1],e=a[2],r=a[3],o=s[0],h=s[1],u=s[2],l=s[3];return t[0]=i*l+r*o+n*u-e*h,t[1]=n*l+r*h+e*o-i*u,t[2]=e*l+r*u+i*h-n*o,t[3]=r*l-i*o-n*h-e*u,t},o.mul=o.multiply,o.scale=r.scale,o.rotateX=function(t,a,s){s*=.5;var i=a[0],n=a[1],e=a[2],r=a[3],o=Math.sin(s),h=Math.cos(s);return t[0]=i*h+r*o,t[1]=n*h+e*o,t[2]=e*h-n*o,t[3]=r*h-i*o,t},o.rotateY=function(t,a,s){s*=.5;var i=a[0],n=a[1],e=a[2],r=a[3],o=Math.sin(s),h=Math.cos(s);return t[0]=i*h-e*o,t[1]=n*h+r*o,t[2]=e*h+i*o,t[3]=r*h-n*o,t},o.rotateZ=function(t,a,s){s*=.5;var i=a[0],n=a[1],e=a[2],r=a[3],o=Math.sin(s),h=Math.cos(s);return t[0]=i*h+n*o,t[1]=n*h-i*o,t[2]=e*h+r*o,t[3]=r*h-e*o,t},o.calculateW=function(t,a){var s=a[0],i=a[1],n=a[2];return t[0]=s,t[1]=i,t[2]=n,t[3]=Math.sqrt(Math.abs(1-s*s-i*i-n*n)),t},o.dot=r.dot,o.lerp=r.lerp,o.slerp=function(t,a,s,i){var n,e,r,o,h,u=a[0],l=a[1],c=a[2],M=a[3],f=s[0],m=s[1],d=s[2],p=s[3];return e=u*f+l*m+c*d+M*p,e<0&&(e=-e,f=-f,m=-m,d=-d,p=-p),1-e>1e-6?(n=Math.acos(e),r=Math.sin(n),o=Math.sin((1-i)*n)/r,h=Math.sin(i*n)/r):(o=1-i,h=i),t[0]=o*u+h*f,t[1]=o*l+h*m,t[2]=o*c+h*d,t[3]=o*M+h*p,t},o.sqlerp=function(){var t=o.create(),a=o.create();return function(s,i,n,e,r,h){return o.slerp(t,i,r,h),o.slerp(a,n,e,h),o.slerp(s,t,a,2*h*(1-h)),s}}(),o.invert=function(t,a){var s=a[0],i=a[1],n=a[2],e=a[3],r=s*s+i*i+n*n+e*e,o=r?1/r:0;return t[0]=-s*o,t[1]=-i*o,t[2]=-n*o,t[3]=e*o,t},o.conjugate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=a[3],t},o.length=r.length,o.len=o.length,o.squaredLength=r.squaredLength,o.sqrLen=o.squaredLength,o.normalize=r.normalize,o.fromMat3=function(t,a){var s,i=a[0]+a[4]+a[8];if(i>0)s=Math.sqrt(i+1),t[3]=.5*s,s=.5/s,t[0]=(a[5]-a[7])*s,t[1]=(a[6]-a[2])*s,t[2]=(a[1]-a[3])*s;else{var n=0;a[4]>a[0]&&(n=1),a[8]>a[3*n+n]&&(n=2);var e=(n+1)%3,r=(n+2)%3;s=Math.sqrt(a[3*n+n]-a[3*e+e]-a[3*r+r]+1),t[n]=.5*s,s=.5/s,t[3]=(a[3*e+r]-a[3*r+e])*s,t[e]=(a[3*e+n]+a[3*n+e])*s,t[r]=(a[3*r+n]+a[3*n+r])*s}return t},o.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},o.exactEquals=r.exactEquals,o.equals=r.equals,t.exports=o},function(t,a,s){var i=s(1),n={};n.create=function(){var t=new i.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},n.clone=function(t){var a=new i.ARRAY_TYPE(2);return a[0]=t[0],a[1]=t[1],a},n.fromValues=function(t,a){var s=new i.ARRAY_TYPE(2);return s[0]=t,s[1]=a,s},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t},n.set=function(t,a,s){return t[0]=a,t[1]=s,t},n.add=function(t,a,s){return t[0]=a[0]+s[0],t[1]=a[1]+s[1],t},n.subtract=function(t,a,s){return t[0]=a[0]-s[0],t[1]=a[1]-s[1],t},n.sub=n.subtract,n.multiply=function(t,a,s){return t[0]=a[0]*s[0],t[1]=a[1]*s[1],t},n.mul=n.multiply,n.divide=function(t,a,s){return t[0]=a[0]/s[0],t[1]=a[1]/s[1],t},n.div=n.divide,n.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t},n.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t},n.min=function(t,a,s){return t[0]=Math.min(a[0],s[0]),t[1]=Math.min(a[1],s[1]),t},n.max=function(t,a,s){return t[0]=Math.max(a[0],s[0]),t[1]=Math.max(a[1],s[1]),t},n.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t},n.scale=function(t,a,s){return t[0]=a[0]*s,t[1]=a[1]*s,t},n.scaleAndAdd=function(t,a,s,i){return t[0]=a[0]+s[0]*i,t[1]=a[1]+s[1]*i,t},n.distance=function(t,a){var s=a[0]-t[0],i=a[1]-t[1];return Math.sqrt(s*s+i*i)},n.dist=n.distance,n.squaredDistance=function(t,a){var s=a[0]-t[0],i=a[1]-t[1];return s*s+i*i},n.sqrDist=n.squaredDistance,n.length=function(t){var a=t[0],s=t[1];return Math.sqrt(a*a+s*s)},n.len=n.length,n.squaredLength=function(t){var a=t[0],s=t[1];return a*a+s*s},n.sqrLen=n.squaredLength,n.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t},n.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t},n.normalize=function(t,a){var s=a[0],i=a[1],n=s*s+i*i;return n>0&&(n=1/Math.sqrt(n),t[0]=a[0]*n,t[1]=a[1]*n),t},n.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]},n.cross=function(t,a,s){var i=a[0]*s[1]-a[1]*s[0];return t[0]=t[1]=0,t[2]=i,t},n.lerp=function(t,a,s,i){var n=a[0],e=a[1];return t[0]=n+i*(s[0]-n),t[1]=e+i*(s[1]-e),t},n.random=function(t,a){a=a||1;var s=2*i.RANDOM()*Math.PI;return t[0]=Math.cos(s)*a,t[1]=Math.sin(s)*a,t},n.transformMat2=function(t,a,s){var i=a[0],n=a[1];return t[0]=s[0]*i+s[2]*n,t[1]=s[1]*i+s[3]*n,t},n.transformMat2d=function(t,a,s){var i=a[0],n=a[1];return t[0]=s[0]*i+s[2]*n+s[4],t[1]=s[1]*i+s[3]*n+s[5],t},n.transformMat3=function(t,a,s){var i=a[0],n=a[1];return t[0]=s[0]*i+s[3]*n+s[6],t[1]=s[1]*i+s[4]*n+s[7],t},n.transformMat4=function(t,a,s){var i=a[0],n=a[1];return t[0]=s[0]*i+s[4]*n+s[12],t[1]=s[1]*i+s[5]*n+s[13],t},n.forEach=function(){var t=n.create();return function(a,s,i,n,e,r){var o,h;for(s||(s=2),i||(i=0),h=n?Math.min(n*s+i,a.length):a.length,o=i;o<h;o+=s)t[0]=a[o],t[1]=a[o+1],e(t,t,r),a[o]=t[0],a[o+1]=t[1];return a}}(),n.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},n.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]},n.equals=function(t,a){var s=t[0],n=t[1],e=a[0],r=a[1];return Math.abs(s-e)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(e))&&Math.abs(n-r)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(r))},t.exports=n},function(t,a){!function(s){if("object"==typeof a)t.exports=s();else if("function"==typeof define&&define.amd)define(s);else{var i;"undefined"!=typeof window?i=window:"undefined"!=typeof global?i=global:"undefined"!=typeof self&&(i=self),i.proj4=s()}}(function(){return function t(a,s,i){function n(r,o){if(!s[r]){if(!a[r]){var h="function"==typeof require&&require;if(!o&&h)return h(r,!0);if(e)return e(r,!0);throw new Error("Cannot find module '"+r+"'")}var u=s[r]={exports:{}};a[r][0].call(u.exports,function(t){var s=a[r][1][t];return n(s?s:t)},u,u.exports,t,a,s,i)}return s[r].exports}for(var e="function"==typeof require&&require,r=0;r<i.length;r++)n(i[r]);return n}({1:[function(t,a,s){function i(t,a,s){if(!(this instanceof i))return new i(t,a,s);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&"undefined"==typeof a){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=a,this.z=s||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}var n=t("mgrs");i.fromMGRS=function(t){return new i(n.toPoint(t))},i.prototype.toMGRS=function(t){return n.forward([this.x,this.y],t)},a.exports=i},{mgrs:67}],2:[function(t,a,s){function i(t,a){if(!(this instanceof i))return new i(t);a=a||function(t){if(t)throw t};var s=n(t);if("object"!=typeof s)return void a(t);var r=o(s),h=i.projections.get(r.projName);h?(e(this,r),e(this,h),this.init(),a(null,this)):a(t)}var n=t("./parseCode"),e=t("./extend"),r=t("./projections"),o=t("./deriveConstants");i.projections=r,i.projections.start(),a.exports=i},{"./deriveConstants":33,"./extend":34,"./parseCode":37,"./projections":39}],3:[function(t,a,s){a.exports=function(t,a,s){var i,n,e,r=s.x,o=s.y,h=s.z||0;for(e=0;3>e;e++)if(!a||2!==e||void 0!==s.z)switch(0===e?(i=r,n="x"):1===e?(i=o,n="y"):(i=h,n="z"),t.axis[e]){case"e":s[n]=i;break;case"w":s[n]=-i;break;case"n":s[n]=i;break;case"s":s[n]=-i;break;case"u":void 0!==s[n]&&(s.z=i);break;case"d":void 0!==s[n]&&(s.z=-i);break;default:return null}return s}},{}],4:[function(t,a,s){var i=Math.PI/2,n=t("./sign");a.exports=function(t){return Math.abs(t)<i?t:t-n(t)*Math.PI}},{"./sign":21}],5:[function(t,a,s){var i=2*Math.PI,n=3.14159265359,e=t("./sign");a.exports=function(t){return Math.abs(t)<=n?t:t-e(t)*i}},{"./sign":21}],6:[function(t,a,s){a.exports=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}},{}],7:[function(t,a,s){a.exports=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))}},{}],8:[function(t,a,s){a.exports=function(t){return.375*t*(1+.25*t*(1+.46875*t))}},{}],9:[function(t,a,s){a.exports=function(t){return.05859375*t*t*(1+.75*t)}},{}],10:[function(t,a,s){a.exports=function(t){return t*t*t*(35/3072)}},{}],11:[function(t,a,s){a.exports=function(t,a,s){var i=a*s;return t/Math.sqrt(1-i*i)}},{}],12:[function(t,a,s){a.exports=function(t,a,s,i,n){var e,r;e=t/a;for(var o=0;15>o;o++)if(r=(t-(a*e-s*Math.sin(2*e)+i*Math.sin(4*e)-n*Math.sin(6*e)))/(a-2*s*Math.cos(2*e)+4*i*Math.cos(4*e)-6*n*Math.cos(6*e)),e+=r,Math.abs(r)<=1e-10)return e;return NaN}},{}],13:[function(t,a,s){var i=Math.PI/2;a.exports=function(t,a){var s=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(a)-s)<1e-6)return 0>a?-1*i:i;for(var n,e,r,o,h=Math.asin(.5*a),u=0;30>u;u++)if(e=Math.sin(h),r=Math.cos(h),o=t*e,n=Math.pow(1-o*o,2)/(2*r)*(a/(1-t*t)-e/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),h+=n,Math.abs(n)<=1e-10)return h;return NaN}},{}],14:[function(t,a,s){a.exports=function(t,a,s,i,n){return t*n-a*Math.sin(2*n)+s*Math.sin(4*n)-i*Math.sin(6*n)}},{}],15:[function(t,a,s){a.exports=function(t,a,s){var i=t*a;return s/Math.sqrt(1-i*i)}},{}],16:[function(t,a,s){var i=Math.PI/2;a.exports=function(t,a){for(var s,n,e=.5*t,r=i-2*Math.atan(a),o=0;15>=o;o++)if(s=t*Math.sin(r),n=i-2*Math.atan(a*Math.pow((1-s)/(1+s),e))-r,r+=n,Math.abs(n)<=1e-10)return r;return-9999}},{}],17:[function(t,a,s){var i=1,n=.25,e=.046875,r=.01953125,o=.01068115234375,h=.75,u=.46875,l=.013020833333333334,c=.007120768229166667,M=.3645833333333333,f=.005696614583333333,m=.3076171875;a.exports=function(t){var a=[];a[0]=i-t*(n+t*(e+t*(r+t*o))),a[1]=t*(h-t*(e+t*(r+t*o)));var s=t*t;return a[2]=s*(u-t*(l+t*c)),s*=t,a[3]=s*(M-t*f),a[4]=s*t*m,a}},{}],18:[function(t,a,s){var i=t("./pj_mlfn"),n=1e-10,e=20;a.exports=function(t,a,s){for(var r=1/(1-a),o=t,h=e;h;--h){var u=Math.sin(o),l=1-a*u*u;if(l=(i(o,u,Math.cos(o),s)-t)*(l*Math.sqrt(l))*r,o-=l,Math.abs(l)<n)return o}return o}},{"./pj_mlfn":19}],19:[function(t,a,s){a.exports=function(t,a,s,i){return s*=a,a*=a,i[0]*t-s*(i[1]+a*(i[2]+a*(i[3]+a*i[4])))}},{}],20:[function(t,a,s){a.exports=function(t,a){var s;return t>1e-7?(s=t*a,(1-t*t)*(a/(1-s*s)-.5/t*Math.log((1-s)/(1+s)))):2*a}},{}],21:[function(t,a,s){a.exports=function(t){return 0>t?-1:1}},{}],22:[function(t,a,s){a.exports=function(t,a){return Math.pow((1-t)/(1+t),a)}},{}],23:[function(t,a,s){a.exports=function(t){var a={x:t[0],y:t[1]};return t.length>2&&(a.z=t[2]),t.length>3&&(a.m=t[3]),a}},{}],24:[function(t,a,s){var i=Math.PI/2;a.exports=function(t,a,s){var n=t*s,e=.5*t;return n=Math.pow((1-n)/(1+n),e),Math.tan(.5*(i-a))/n}},{}],25:[function(t,a,s){s.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},s.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},s.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},s.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},s.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},s.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},s.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},s.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},s.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},s.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},s.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},s.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},s.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},s.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},s.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},{}],26:[function(t,a,s){s.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},s.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},s.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},s.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},s.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},s.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},s.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},s.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},s.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},s.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},s.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},s.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},s.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},s.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},s.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},s.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},s.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},s.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},s.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},s.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},s.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},s.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},s.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},s.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},s.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},s.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},s.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},s.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},s.hough={a:6378270,rf:297,ellipseName:"Hough"},s.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},s.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},s.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},s.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},s.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},s.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},s.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},s.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},s.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},s.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},s.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},s.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},s.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},s.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},{}],27:[function(t,a,s){s.greenwich=0,s.lisbon=-9.131906111111,s.paris=2.337229166667,s.bogota=-74.080916666667,s.madrid=-3.687938888889,s.rome=12.452333333333,s.bern=7.439583333333,s.jakarta=106.807719444444,s.ferro=-17.666666666667,s.brussels=4.367975,s.stockholm=18.058277777778,s.athens=23.7163375,s.oslo=10.722916666667},{}],28:[function(t,a,s){s.ft={to_meter:.3048},s["us-ft"]={to_meter:1200/3937}},{}],29:[function(t,a,s){function i(t,a,s){var i;return Array.isArray(s)?(i=o(t,a,s),3===s.length?[i.x,i.y,i.z]:[i.x,i.y]):o(t,a,s)}function n(t){return t instanceof r?t:t.oProj?t.oProj:r(t)}function e(t,a,s){t=n(t);var e,r=!1;return"undefined"==typeof a?(a=t,t=h,r=!0):("undefined"!=typeof a.x||Array.isArray(a))&&(s=a,a=t,t=h,r=!0),a=n(a),s?i(t,a,s):(e={forward:function(s){return i(t,a,s)},inverse:function(s){return i(a,t,s)}},r&&(e.oProj=a),e)}var r=t("./Proj"),o=t("./transform"),h=r("WGS84");a.exports=e},{"./Proj":2,"./transform":65}],30:[function(t,a,s){var i=Math.PI/2,n=1,e=2,r=3,o=4,h=5,u=484813681109536e-20,l=1.0026,c=.3826834323650898,M=function(t){return this instanceof M?(this.datum_type=o,void(t&&(t.datumCode&&"none"===t.datumCode&&(this.datum_type=h),t.datum_params&&(this.datum_params=t.datum_params.map(parseFloat),(0!==this.datum_params[0]||0!==this.datum_params[1]||0!==this.datum_params[2])&&(this.datum_type=n),this.datum_params.length>3&&(0!==this.datum_params[3]||0!==this.datum_params[4]||0!==this.datum_params[5]||0!==this.datum_params[6])&&(this.datum_type=e,this.datum_params[3]*=u,this.datum_params[4]*=u,this.datum_params[5]*=u,this.datum_params[6]=this.datum_params[6]/1e6+1)),this.datum_type=t.grids?r:this.datum_type,this.a=t.a,this.b=t.b,this.es=t.es,this.ep2=t.ep2,this.datum_type===r&&(this.grids=t.grids)))):new M(t)};M.prototype={compare_datums:function(t){return this.datum_type===t.datum_type&&(!(this.a!==t.a||Math.abs(this.es-t.es)>5e-11)&&(this.datum_type===n?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]:this.datum_type===e?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]&&this.datum_params[3]===t.datum_params[3]&&this.datum_params[4]===t.datum_params[4]&&this.datum_params[5]===t.datum_params[5]&&this.datum_params[6]===t.datum_params[6]:this.datum_type!==r&&t.datum_type!==r||this.nadgrids===t.nadgrids))},geodetic_to_geocentric:function(t){var a,s,n,e,r,o,h,u=t.x,l=t.y,c=t.z?t.z:0,M=0;if(-i>l&&l>-1.001*i)l=-i;else if(l>i&&1.001*i>l)l=i;else if(-i>l||l>i)return null;return u>Math.PI&&(u-=2*Math.PI),r=Math.sin(l),h=Math.cos(l),o=r*r,e=this.a/Math.sqrt(1-this.es*o),a=(e+c)*h*Math.cos(u),s=(e+c)*h*Math.sin(u),n=(e*(1-this.es)+c)*r,t.x=a,t.y=s,t.z=n,M},geocentric_to_geodetic:function(t){var a,s,n,e,r,o,h,u,l,c,M,f,m,d,p,_,x,v=1e-12,b=v*v,y=30,S=t.x,I=t.y,g=t.z?t.z:0;if(m=!1,a=Math.sqrt(S*S+I*I),s=Math.sqrt(S*S+I*I+g*g),a/this.a<v){if(m=!0,p=0,s/this.a<v)return _=i,void(x=-this.b)}else p=Math.atan2(I,S);n=g/s,e=a/s,r=1/Math.sqrt(1-this.es*(2-this.es)*e*e),u=e*(1-this.es)*r,l=n*r,d=0;do d++,h=this.a/Math.sqrt(1-this.es*l*l),x=a*u+g*l-h*(1-this.es*l*l),o=this.es*h/(h+x),r=1/Math.sqrt(1-o*(2-o)*e*e),c=e*(1-o)*r,M=n*r,f=M*u-c*l,u=c,l=M;while(f*f>b&&y>d);return _=Math.atan(M/Math.abs(c)),t.x=p,t.y=_,t.z=x,t},geocentric_to_geodetic_noniter:function(t){var a,s,n,e,r,o,h,u,M,f,m,d,p,_,x,v,b,y=t.x,S=t.y,I=t.z?t.z:0;if(y=parseFloat(y),S=parseFloat(S),I=parseFloat(I),b=!1,0!==y)a=Math.atan2(S,y);else if(S>0)a=i;else if(0>S)a=-i;else if(b=!0,a=0,I>0)s=i;else{if(!(0>I))return s=i,void(n=-this.b);s=-i}return r=y*y+S*S,e=Math.sqrt(r),o=I*l,u=Math.sqrt(o*o+r),f=o/u,d=e/u,m=f*f*f,h=I+this.b*this.ep2*m,v=e-this.a*this.es*d*d*d,M=Math.sqrt(h*h+v*v),p=h/M,_=v/M,x=this.a/Math.sqrt(1-this.es*p*p),n=_>=c?e/_-x:-c>=_?e/-_-x:I/p+x*(this.es-1),b===!1&&(s=Math.atan(p/_)),t.x=a,t.y=s,t.z=n,t},geocentric_to_wgs84:function(t){if(this.datum_type===n)t.x+=this.datum_params[0],t.y+=this.datum_params[1],t.z+=this.datum_params[2];else if(this.datum_type===e){var a=this.datum_params[0],s=this.datum_params[1],i=this.datum_params[2],r=this.datum_params[3],o=this.datum_params[4],h=this.datum_params[5],u=this.datum_params[6],l=u*(t.x-h*t.y+o*t.z)+a,c=u*(h*t.x+t.y-r*t.z)+s,M=u*(-o*t.x+r*t.y+t.z)+i;t.x=l,t.y=c,t.z=M}},geocentric_from_wgs84:function(t){if(this.datum_type===n)t.x-=this.datum_params[0],t.y-=this.datum_params[1],t.z-=this.datum_params[2];else if(this.datum_type===e){var a=this.datum_params[0],s=this.datum_params[1],i=this.datum_params[2],r=this.datum_params[3],o=this.datum_params[4],h=this.datum_params[5],u=this.datum_params[6],l=(t.x-a)/u,c=(t.y-s)/u,M=(t.z-i)/u;t.x=l+h*c-o*M,t.y=-h*l+c+r*M,t.z=o*l-r*c+M}}},a.exports=M},{}],31:[function(t,a,s){var i=1,n=2,e=3,r=5,o=6378137,h=.006694379990141316;a.exports=function(t,a,s){function u(t){return t===i||t===n}var l,c,M;if(t.compare_datums(a))return s;if(t.datum_type===r||a.datum_type===r)return s;var f=t.a,m=t.es,d=a.a,p=a.es,_=t.datum_type;if(_===e)if(0===this.apply_gridshift(t,0,s))t.a=o,t.es=h;else{if(!t.datum_params)return t.a=f,t.es=t.es,s;for(l=1,c=0,M=t.datum_params.length;M>c;c++)l*=t.datum_params[c];if(0===l)return t.a=f,t.es=t.es,s;_=t.datum_params.length>3?n:i}return a.datum_type===e&&(a.a=o,a.es=h),(t.es!==a.es||t.a!==a.a||u(_)||u(a.datum_type))&&(t.geodetic_to_geocentric(s),u(t.datum_type)&&t.geocentric_to_wgs84(s),u(a.datum_type)&&a.geocentric_from_wgs84(s),a.geocentric_to_geodetic(s)),a.datum_type===e&&this.apply_gridshift(a,1,s),t.a=f,t.es=m,a.a=d,a.es=p,s}},{}],32:[function(t,a,s){function i(t){var a=this;if(2===arguments.length){var s=arguments[1];"string"==typeof s?"+"===s.charAt(0)?i[t]=e(arguments[1]):i[t]=r(arguments[1]):i[t]=s}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?i.apply(a,t):i(t)});if("string"==typeof t){if(t in i)return i[t]}else"EPSG"in t?i["EPSG:"+t.EPSG]=t:"ESRI"in t?i["ESRI:"+t.ESRI]=t:"IAU2000"in t?i["IAU2000:"+t.IAU2000]=t:console.log(t);return}}var n=t("./global"),e=t("./projString"),r=t("./wkt");n(i),a.exports=i},{"./global":35,"./projString":38,"./wkt":66}],33:[function(t,a,s){var i=t("./constants/Datum"),n=t("./constants/Ellipsoid"),e=t("./extend"),r=t("./datum"),o=1e-10,h=.16666666666666666,u=.04722222222222222,l=.022156084656084655;a.exports=function(t){if(t.datumCode&&"none"!==t.datumCode){var a=i[t.datumCode];a&&(t.datum_params=a.towgs84?a.towgs84.split(","):null,t.ellps=a.ellipse,t.datumName=a.datumName?a.datumName:t.datumCode)}if(!t.a){var s=n[t.ellps]?n[t.ellps]:n.WGS84;e(t,s)}return t.rf&&!t.b&&(t.b=(1-1/t.rf)*t.a),(0===t.rf||Math.abs(t.a-t.b)<o)&&(t.sphere=!0,t.b=t.a),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=(t.a2-t.b2)/t.a2,t.e=Math.sqrt(t.es),t.R_A&&(t.a*=1-t.es*(h+t.es*(u+t.es*l)),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=0),t.ep2=(t.a2-t.b2)/t.b2,t.k0||(t.k0=1),t.axis||(t.axis="enu"),t.datum||(t.datum=r(t)),t}},{"./constants/Datum":25,"./constants/Ellipsoid":26,"./datum":30,"./extend":34}],34:[function(t,a,s){a.exports=function(t,a){t=t||{};var s,i;if(!a)return t;for(i in a)s=a[i],void 0!==s&&(t[i]=s);return t}},{}],35:[function(t,a,s){a.exports=function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}},{}],36:[function(t,a,s){var i=t("./core");i.defaultDatum="WGS84",i.Proj=t("./Proj"),i.WGS84=new i.Proj("WGS84"),i.Point=t("./Point"),i.toPoint=t("./common/toPoint"),i.defs=t("./defs"),i.transform=t("./transform"),i.mgrs=t("mgrs"),i.version=t("../package.json").version,t("./includedProjections")(i),a.exports=i},{"../package.json":68,"./Point":1,"./Proj":2,"./common/toPoint":23,"./core":29,"./defs":32,"./includedProjections":"hTEDpn","./transform":65,mgrs:67}],37:[function(t,a,s){function i(t){return"string"==typeof t}function n(t){return t in h}function e(t){var a=["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"];return a.reduce(function(a,s){return a+1+t.indexOf(s)},0)}function r(t){return"+"===t[0]}function o(t){return i(t)?n(t)?h[t]:e(t)?u(t):r(t)?l(t):void 0:t}var h=t("./defs"),u=t("./wkt"),l=t("./projString");a.exports=o},{"./defs":32,"./projString":38,"./wkt":66}],38:[function(t,a,s){var i=.017453292519943295,n=t("./constants/PrimeMeridian"),e=t("./constants/units");a.exports=function(t){var a={},s={};t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).forEach(function(t){var a=t.split("=");a.push(!0),s[a[0].toLowerCase()]=a[1]});var r,o,h,u={proj:"projName",datum:"datumCode",rf:function(t){a.rf=parseFloat(t)},lat_0:function(t){a.lat0=t*i},lat_1:function(t){a.lat1=t*i},lat_2:function(t){a.lat2=t*i},lat_ts:function(t){a.lat_ts=t*i},lon_0:function(t){a.long0=t*i},lon_1:function(t){a.long1=t*i},lon_2:function(t){a.long2=t*i},alpha:function(t){a.alpha=parseFloat(t)*i},lonc:function(t){a.longc=t*i},x_0:function(t){a.x0=parseFloat(t)},y_0:function(t){a.y0=parseFloat(t)},k_0:function(t){a.k0=parseFloat(t)},k:function(t){a.k0=parseFloat(t)},a:function(t){a.a=parseFloat(t)},b:function(t){a.b=parseFloat(t)},r_a:function(){a.R_A=!0},zone:function(t){a.zone=parseInt(t,10)},south:function(){a.utmSouth=!0},towgs84:function(t){a.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){a.to_meter=parseFloat(t)},units:function(t){a.units=t,e[t]&&(a.to_meter=e[t].to_meter)},from_greenwich:function(t){a.from_greenwich=t*i},pm:function(t){a.from_greenwich=(n[t]?n[t]:parseFloat(t))*i},nadgrids:function(t){"@null"===t?a.datumCode="none":a.nadgrids=t},axis:function(t){var s="ewnsud";3===t.length&&-1!==s.indexOf(t.substr(0,1))&&-1!==s.indexOf(t.substr(1,1))&&-1!==s.indexOf(t.substr(2,1))&&(a.axis=t)}};for(r in s)o=s[r],r in u?(h=u[r],"function"==typeof h?h(o):a[h]=o):a[r]=o;return"string"==typeof a.datumCode&&"WGS84"!==a.datumCode&&(a.datumCode=a.datumCode.toLowerCase()),a}},{"./constants/PrimeMeridian":27,"./constants/units":28}],39:[function(t,a,s){function i(t,a){var s=r.length;return t.names?(r[s]=t,t.names.forEach(function(t){e[t.toLowerCase()]=s}),this):(console.log(a),!0)}var n=[t("./projections/merc"),t("./projections/longlat")],e={},r=[];s.add=i,s.get=function(t){if(!t)return!1;var a=t.toLowerCase();return"undefined"!=typeof e[a]&&r[e[a]]?r[e[a]]:void 0},s.start=function(){n.forEach(i)}},{"./projections/longlat":51,"./projections/merc":52}],40:[function(t,a,s){var i=1e-10,n=t("../common/msfnz"),e=t("../common/qsfnz"),r=t("../common/adjust_lon"),o=t("../common/asinz");s.init=function(){Math.abs(this.lat1+this.lat2)<i||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=n(this.e3,this.sin_po,this.cos_po),this.qs1=e(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,
this.ms2=n(this.e3,this.sin_po,this.cos_po),this.qs2=e(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=e(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>i?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},s.forward=function(t){var a=t.x,s=t.y;this.sin_phi=Math.sin(s),this.cos_phi=Math.cos(s);var i=e(this.e3,this.sin_phi,this.cos_phi),n=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,o=this.ns0*r(a-this.long0),h=n*Math.sin(o)+this.x0,u=this.rh-n*Math.cos(o)+this.y0;return t.x=h,t.y=u,t},s.inverse=function(t){var a,s,i,n,e,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(a=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(a=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),n=0,0!==a&&(n=Math.atan2(i*t.x,i*t.y)),i=a*this.ns0/this.a,this.sphere?o=Math.asin((this.c-i*i)/(2*this.ns0)):(s=(this.c-i*i)/this.ns0,o=this.phi1z(this.e3,s)),e=r(n/this.ns0+this.long0),t.x=e,t.y=o,t},s.phi1z=function(t,a){var s,n,e,r,h,u=o(.5*a);if(i>t)return u;for(var l=t*t,c=1;25>=c;c++)if(s=Math.sin(u),n=Math.cos(u),e=t*s,r=1-e*e,h=.5*r*r/n*(a/(1-l)-s/r+.5/t*Math.log((1-e)/(1+e))),u+=h,Math.abs(h)<=1e-7)return u;return null},s.names=["Albers_Conic_Equal_Area","Albers","aea"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/msfnz":15,"../common/qsfnz":20}],41:[function(t,a,s){var i=t("../common/adjust_lon"),n=Math.PI/2,e=1e-10,r=t("../common/mlfn"),o=t("../common/e0fn"),h=t("../common/e1fn"),u=t("../common/e2fn"),l=t("../common/e3fn"),c=t("../common/gN"),M=t("../common/asinz"),f=t("../common/imlfn");s.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},s.forward=function(t){var a,s,M,f,m,d,p,_,x,v,b,y,S,I,g,D,F,w,E,P,A,z,j,N=t.x,T=t.y,k=Math.sin(t.y),R=Math.cos(t.y),L=i(N-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=e?(t.x=this.x0+this.a*(n-T)*Math.sin(L),t.y=this.y0-this.a*(n-T)*Math.cos(L),t):Math.abs(this.sin_p12+1)<=e?(t.x=this.x0+this.a*(n+T)*Math.sin(L),t.y=this.y0+this.a*(n+T)*Math.cos(L),t):(w=this.sin_p12*k+this.cos_p12*R*Math.cos(L),D=Math.acos(w),F=D/Math.sin(D),t.x=this.x0+this.a*F*R*Math.sin(L),t.y=this.y0+this.a*F*(this.cos_p12*k-this.sin_p12*R*Math.cos(L)),t):(a=o(this.es),s=h(this.es),M=u(this.es),f=l(this.es),Math.abs(this.sin_p12-1)<=e?(m=this.a*r(a,s,M,f,n),d=this.a*r(a,s,M,f,T),t.x=this.x0+(m-d)*Math.sin(L),t.y=this.y0-(m-d)*Math.cos(L),t):Math.abs(this.sin_p12+1)<=e?(m=this.a*r(a,s,M,f,n),d=this.a*r(a,s,M,f,T),t.x=this.x0+(m+d)*Math.sin(L),t.y=this.y0+(m+d)*Math.cos(L),t):(p=k/R,_=c(this.a,this.e,this.sin_p12),x=c(this.a,this.e,k),v=Math.atan((1-this.es)*p+this.es*_*this.sin_p12/(x*R)),b=Math.atan2(Math.sin(L),this.cos_p12*Math.tan(v)-this.sin_p12*Math.cos(L)),E=0===b?Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):Math.abs(Math.abs(b)-Math.PI)<=e?-Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):Math.asin(Math.sin(L)*Math.cos(v)/Math.sin(b)),y=this.e*this.sin_p12/Math.sqrt(1-this.es),S=this.e*this.cos_p12*Math.cos(b)/Math.sqrt(1-this.es),I=y*S,g=S*S,P=E*E,A=P*E,z=A*E,j=z*E,D=_*E*(1-P*g*(1-g)/6+A/8*I*(1-2*g)+z/120*(g*(4-7*g)-3*y*y*(1-7*g))-j/48*I),t.x=this.x0+D*Math.sin(b),t.y=this.y0+D*Math.cos(b),t))},s.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var a,s,m,d,p,_,x,v,b,y,S,I,g,D,F,w,E,P,A,z,j,N,T;if(this.sphere){if(a=Math.sqrt(t.x*t.x+t.y*t.y),a>2*n*this.a)return;return s=a/this.a,m=Math.sin(s),d=Math.cos(s),p=this.long0,Math.abs(a)<=e?_=this.lat0:(_=M(d*this.sin_p12+t.y*m*this.cos_p12/a),x=Math.abs(this.lat0)-n,p=i(Math.abs(x)<=e?this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y):this.long0+Math.atan2(t.x*m,a*this.cos_p12*d-t.y*this.sin_p12*m))),t.x=p,t.y=_,t}return v=o(this.es),b=h(this.es),y=u(this.es),S=l(this.es),Math.abs(this.sin_p12-1)<=e?(I=this.a*r(v,b,y,S,n),a=Math.sqrt(t.x*t.x+t.y*t.y),g=I-a,_=f(g/this.a,v,b,y,S),p=i(this.long0+Math.atan2(t.x,-1*t.y)),t.x=p,t.y=_,t):Math.abs(this.sin_p12+1)<=e?(I=this.a*r(v,b,y,S,n),a=Math.sqrt(t.x*t.x+t.y*t.y),g=a-I,_=f(g/this.a,v,b,y,S),p=i(this.long0+Math.atan2(t.x,t.y)),t.x=p,t.y=_,t):(a=Math.sqrt(t.x*t.x+t.y*t.y),w=Math.atan2(t.x,t.y),D=c(this.a,this.e,this.sin_p12),E=Math.cos(w),P=this.e*this.cos_p12*E,A=-P*P/(1-this.es),z=3*this.es*(1-A)*this.sin_p12*this.cos_p12*E/(1-this.es),j=a/D,N=j-A*(1+A)*Math.pow(j,3)/6-z*(1+3*A)*Math.pow(j,4)/24,T=1-A*N*N/2-j*N*N*N/6,F=Math.asin(this.sin_p12*Math.cos(N)+this.cos_p12*Math.sin(N)*E),p=i(this.long0+Math.asin(Math.sin(w)*Math.sin(N)/Math.cos(F))),_=Math.atan((1-this.es*T*this.sin_p12/Math.sin(F))*Math.tan(F)/(1-this.es)),t.x=p,t.y=_,t)},s.names=["Azimuthal_Equidistant","aeqd"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],42:[function(t,a,s){var i=t("../common/mlfn"),n=t("../common/e0fn"),e=t("../common/e1fn"),r=t("../common/e2fn"),o=t("../common/e3fn"),h=t("../common/gN"),u=t("../common/adjust_lon"),l=t("../common/adjust_lat"),c=t("../common/imlfn"),M=Math.PI/2,f=1e-10;s.init=function(){this.sphere||(this.e0=n(this.es),this.e1=e(this.es),this.e2=r(this.es),this.e3=o(this.es),this.ml0=this.a*i(this.e0,this.e1,this.e2,this.e3,this.lat0))},s.forward=function(t){var a,s,n=t.x,e=t.y;if(n=u(n-this.long0),this.sphere)a=this.a*Math.asin(Math.cos(e)*Math.sin(n)),s=this.a*(Math.atan2(Math.tan(e),Math.cos(n))-this.lat0);else{var r=Math.sin(e),o=Math.cos(e),l=h(this.a,this.e,r),c=Math.tan(e)*Math.tan(e),M=n*Math.cos(e),f=M*M,m=this.es*o*o/(1-this.es),d=this.a*i(this.e0,this.e1,this.e2,this.e3,e);a=l*M*(1-f*c*(1/6-(8-c+8*m)*f/120)),s=d-this.ml0+l*r/o*f*(.5+(5-c+6*m)*f/24)}return t.x=a+this.x0,t.y=s+this.y0,t},s.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var a,s,i=t.x/this.a,n=t.y/this.a;if(this.sphere){var e=n+this.lat0;a=Math.asin(Math.sin(e)*Math.cos(i)),s=Math.atan2(Math.tan(i),Math.cos(e))}else{var r=this.ml0/this.a+n,o=c(r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-M)<=f)return t.x=this.long0,t.y=M,0>n&&(t.y*=-1),t;var m=h(this.a,this.e,Math.sin(o)),d=m*m*m/this.a/this.a*(1-this.es),p=Math.pow(Math.tan(o),2),_=i*this.a/m,x=_*_;a=o-m*Math.tan(o)/d*_*_*(.5-(1+3*p)*_*_/24),s=_*(1-x*(p/3+(1+3*p)*p*x/15))/Math.cos(o)}return t.x=u(s+this.long0),t.y=l(a),t},s.names=["Cassini","Cassini_Soldner","cass"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],43:[function(t,a,s){var i=t("../common/adjust_lon"),n=t("../common/qsfnz"),e=t("../common/msfnz"),r=t("../common/iqsfnz");s.init=function(){this.sphere||(this.k0=e(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},s.forward=function(t){var a,s,e=t.x,r=t.y,o=i(e-this.long0);if(this.sphere)a=this.x0+this.a*o*Math.cos(this.lat_ts),s=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var h=n(this.e,Math.sin(r));a=this.x0+this.a*this.k0*o,s=this.y0+this.a*h*.5/this.k0}return t.x=a,t.y=s,t},s.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var a,s;return this.sphere?(a=i(this.long0+t.x/this.a/Math.cos(this.lat_ts)),s=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(s=r(this.e,2*t.y*this.k0/this.a),a=i(this.long0+t.x/(this.a*this.k0))),t.x=a,t.y=s,t},s.names=["cea"]},{"../common/adjust_lon":5,"../common/iqsfnz":13,"../common/msfnz":15,"../common/qsfnz":20}],44:[function(t,a,s){var i=t("../common/adjust_lon"),n=t("../common/adjust_lat");s.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},s.forward=function(t){var a=t.x,s=t.y,e=i(a-this.long0),r=n(s-this.lat0);return t.x=this.x0+this.a*e*this.rc,t.y=this.y0+this.a*r,t},s.inverse=function(t){var a=t.x,s=t.y;return t.x=i(this.long0+(a-this.x0)/(this.a*this.rc)),t.y=n(this.lat0+(s-this.y0)/this.a),t},s.names=["Equirectangular","Equidistant_Cylindrical","eqc"]},{"../common/adjust_lat":4,"../common/adjust_lon":5}],45:[function(t,a,s){var i=t("../common/e0fn"),n=t("../common/e1fn"),e=t("../common/e2fn"),r=t("../common/e3fn"),o=t("../common/msfnz"),h=t("../common/mlfn"),u=t("../common/adjust_lon"),l=t("../common/adjust_lat"),c=t("../common/imlfn"),M=1e-10;s.init=function(){Math.abs(this.lat1+this.lat2)<M||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=i(this.es),this.e1=n(this.es),this.e2=e(this.es),this.e3=r(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=o(this.e,this.sinphi,this.cosphi),this.ml1=h(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<M?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=o(this.e,this.sinphi,this.cosphi),this.ml2=h(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=h(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},s.forward=function(t){var a,s=t.x,i=t.y;if(this.sphere)a=this.a*(this.g-i);else{var n=h(this.e0,this.e1,this.e2,this.e3,i);a=this.a*(this.g-n)}var e=this.ns*u(s-this.long0),r=this.x0+a*Math.sin(e),o=this.y0+this.rh-a*Math.cos(e);return t.x=r,t.y=o,t},s.inverse=function(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var a,s,i,n;this.ns>=0?(s=Math.sqrt(t.x*t.x+t.y*t.y),a=1):(s=-Math.sqrt(t.x*t.x+t.y*t.y),a=-1);var e=0;if(0!==s&&(e=Math.atan2(a*t.x,a*t.y)),this.sphere)return n=u(this.long0+e/this.ns),i=l(this.g-s/this.a),t.x=n,t.y=i,t;var r=this.g-s/this.a;return i=c(r,this.e0,this.e1,this.e2,this.e3),n=u(this.long0+e/this.ns),t.x=n,t.y=i,t},s.names=["Equidistant_Conic","eqdc"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/imlfn":12,"../common/mlfn":14,"../common/msfnz":15}],46:[function(t,a,s){var i=Math.PI/4,n=t("../common/srat"),e=Math.PI/2,r=20;s.init=function(){var t=Math.sin(this.lat0),a=Math.cos(this.lat0);a*=a,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*a*a/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+i)/(Math.pow(Math.tan(.5*this.lat0+i),this.C)*n(this.e*t,this.ratexp))},s.forward=function(t){var a=t.x,s=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*s+i),this.C)*n(this.e*Math.sin(s),this.ratexp))-e,t.x=this.C*a,t},s.inverse=function(t){for(var a=1e-14,s=t.x/this.C,o=t.y,h=Math.pow(Math.tan(.5*o+i)/this.K,1/this.C),u=r;u>0&&(o=2*Math.atan(h*n(this.e*Math.sin(t.y),-.5*this.e))-e,!(Math.abs(o-t.y)<a));--u)t.y=o;return u?(t.x=s,t.y=o,t):null},s.names=["gauss"]},{"../common/srat":22}],47:[function(t,a,s){var i=t("../common/adjust_lon"),n=1e-10,e=t("../common/asinz");s.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},s.forward=function(t){var a,s,e,r,o,h,u,l,c=t.x,M=t.y;return e=i(c-this.long0),a=Math.sin(M),s=Math.cos(M),r=Math.cos(e),h=this.sin_p14*a+this.cos_p14*s*r,o=1,h>0||Math.abs(h)<=n?(u=this.x0+this.a*o*s*Math.sin(e)/h,l=this.y0+this.a*o*(this.cos_p14*a-this.sin_p14*s*r)/h):(u=this.x0+this.infinity_dist*s*Math.sin(e),l=this.y0+this.infinity_dist*(this.cos_p14*a-this.sin_p14*s*r)),t.x=u,t.y=l,t},s.inverse=function(t){var a,s,n,r,o,h;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(a=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(a,this.rc),s=Math.sin(r),n=Math.cos(r),h=e(n*this.sin_p14+t.y*s*this.cos_p14/a),o=Math.atan2(t.x*s,a*this.cos_p14*n-t.y*this.sin_p14*s),o=i(this.long0+o)):(h=this.phic0,o=0),t.x=o,t.y=h,t},s.names=["gnom"]},{"../common/adjust_lon":5,"../common/asinz":6}],48:[function(t,a,s){var i=t("../common/adjust_lon");s.init=function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},s.forward=function(t){var a,s,n,e,r,o,h,u=t.x,l=t.y,c=i(u-this.long0);return a=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),s=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/a)-this.s45),n=-c*this.alfa,e=Math.asin(Math.cos(this.ad)*Math.sin(s)+Math.sin(this.ad)*Math.cos(s)*Math.cos(n)),r=Math.asin(Math.cos(s)*Math.sin(n)/Math.cos(e)),o=this.n*r,h=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(e/2+this.s45),this.n),t.y=h*Math.cos(o)/1,t.x=h*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t},s.inverse=function(t){var a,s,i,n,e,r,o,h,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),r=Math.sqrt(t.x*t.x+t.y*t.y),e=Math.atan2(t.y,t.x),n=e/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/r,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),a=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),s=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(a)),t.x=this.long0-s/this.alfa,o=a,h=0;var l=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(a/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(h=1),o=t.y,l+=1;while(0===h&&15>l);return l>=15?null:t},s.names=["Krovak","krovak"]},{"../common/adjust_lon":5}],49:[function(t,a,s){var i=Math.PI/2,n=Math.PI/4,e=1e-10,r=t("../common/qsfnz"),o=t("../common/adjust_lon");s.S_POLE=1,s.N_POLE=2,s.EQUIT=3,s.OBLIQ=4,s.init=function(){var t=Math.abs(this.lat0);if(Math.abs(t-i)<e?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<e?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var a;switch(this.qp=r(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),a=Math.sin(this.lat0),this.sinb1=r(this.e,a)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*a*a)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},s.forward=function(t){var a,s,h,u,l,c,M,f,m,d,p=t.x,_=t.y;if(p=o(p-this.long0),this.sphere){if(l=Math.sin(_),d=Math.cos(_),h=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(s=this.mode===this.EQUIT?1+d*h:1+this.sinph0*l+this.cosph0*d*h,e>=s)return null;s=Math.sqrt(2/s),a=s*d*Math.sin(p),s*=this.mode===this.EQUIT?l:this.cosph0*l-this.sinph0*d*h}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(h=-h),Math.abs(_+this.phi0)<e)return null;s=n-.5*_,s=2*(this.mode===this.S_POLE?Math.cos(s):Math.sin(s)),a=s*Math.sin(p),s*=h}}else{switch(M=0,f=0,m=0,h=Math.cos(p),u=Math.sin(p),l=Math.sin(_),c=r(this.e,l),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(M=c/this.qp,f=Math.sqrt(1-M*M)),this.mode){case this.OBLIQ:m=1+this.sinb1*M+this.cosb1*f*h;break;case this.EQUIT:m=1+f*h;break;case this.N_POLE:m=i+_,c=this.qp-c;break;case this.S_POLE:m=_-i,c=this.qp+c}if(Math.abs(m)<e)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:m=Math.sqrt(2/m),s=this.mode===this.OBLIQ?this.ymf*m*(this.cosb1*M-this.sinb1*f*h):(m=Math.sqrt(2/(1+f*h)))*M*this.ymf,a=this.xmf*m*f*u;break;case this.N_POLE:case this.S_POLE:c>=0?(a=(m=Math.sqrt(c))*u,s=h*(this.mode===this.S_POLE?m:-m)):a=s=0}}return t.x=this.a*a+this.x0,t.y=this.a*s+this.y0,t},s.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var a,s,n,r,h,u,l,c=t.x/this.a,M=t.y/this.a;if(this.sphere){var f,m=0,d=0;if(f=Math.sqrt(c*c+M*M),s=.5*f,s>1)return null;switch(s=2*Math.asin(s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(d=Math.sin(s),m=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(f)<=e?0:Math.asin(M*d/f),c*=d,M=m*f;break;case this.OBLIQ:s=Math.abs(f)<=e?this.phi0:Math.asin(m*this.sinph0+M*d*this.cosph0/f),c*=d*this.cosph0,M=(m-Math.sin(s)*this.sinph0)*f;break;case this.N_POLE:M=-M,s=i-s;break;case this.S_POLE:s-=i}a=0!==M||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(c,M):0}else{if(l=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c/=this.dd,M*=this.dd,u=Math.sqrt(c*c+M*M),e>u)return t.x=0,t.y=this.phi0,t;r=2*Math.asin(.5*u/this.rq),n=Math.cos(r),c*=r=Math.sin(r),this.mode===this.OBLIQ?(l=n*this.sinb1+M*r*this.cosb1/u,h=this.qp*l,M=u*this.cosb1*n-M*this.sinb1*r):(l=M*r/u,h=this.qp*l,M=u*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(M=-M),h=c*c+M*M,!h)return t.x=0,t.y=this.phi0,t;l=1-h/this.qp,this.mode===this.S_POLE&&(l=-l)}a=Math.atan2(c,M),s=this.authlat(Math.asin(l),this.apa)}return t.x=o(this.long0+a),t.y=s,t},s.P00=.3333333333333333,s.P01=.17222222222222222,s.P02=.10257936507936508,s.P10=.06388888888888888,s.P11=.0664021164021164,s.P20=.016415012942191543,s.authset=function(t){var a,s=[];return s[0]=t*this.P00,a=t*t,s[0]+=a*this.P01,s[1]=a*this.P10,a*=t,s[0]+=a*this.P02,s[1]+=a*this.P11,s[2]=a*this.P20,s},s.authlat=function(t,a){var s=t+t;return t+a[0]*Math.sin(s)+a[1]*Math.sin(s+s)+a[2]*Math.sin(s+s+s)},s.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"]},{"../common/adjust_lon":5,"../common/qsfnz":20}],50:[function(t,a,s){var i=1e-10,n=t("../common/msfnz"),e=t("../common/tsfnz"),r=Math.PI/2,o=t("../common/sign"),h=t("../common/adjust_lon"),u=t("../common/phi2z");s.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<i)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var a=Math.sin(this.lat1),s=Math.cos(this.lat1),r=n(this.e,a,s),o=e(this.e,this.lat1,a),h=Math.sin(this.lat2),u=Math.cos(this.lat2),l=n(this.e,h,u),c=e(this.e,this.lat2,h),M=e(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>i?this.ns=Math.log(r/l)/Math.log(o/c):this.ns=a,isNaN(this.ns)&&(this.ns=a),this.f0=r/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(M,this.ns),this.title||(this.title="Lambert Conformal Conic")}},s.forward=function(t){var a=t.x,s=t.y;Math.abs(2*Math.abs(s)-Math.PI)<=i&&(s=o(s)*(r-2*i));var n,u,l=Math.abs(Math.abs(s)-r);if(l>i)n=e(this.e,s,Math.sin(s)),u=this.a*this.f0*Math.pow(n,this.ns);else{if(l=s*this.ns,0>=l)return null;u=0}var c=this.ns*h(a-this.long0);return t.x=this.k0*(u*Math.sin(c))+this.x0,t.y=this.k0*(this.rh-u*Math.cos(c))+this.y0,t},s.inverse=function(t){var a,s,i,n,e,o=(t.x-this.x0)/this.k0,l=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(a=Math.sqrt(o*o+l*l),s=1):(a=-Math.sqrt(o*o+l*l),s=-1);var c=0;if(0!==a&&(c=Math.atan2(s*o,s*l)),0!==a||this.ns>0){if(s=1/this.ns,i=Math.pow(a/(this.a*this.f0),s),n=u(this.e,i),-9999===n)return null}else n=-r;return e=h(c/this.ns+this.long0),t.x=e,t.y=n,t},s.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],51:[function(t,a,s){function i(t){return t}s.init=function(){},s.forward=i,s.inverse=i,s.names=["longlat","identity"]},{}],52:[function(t,a,s){var i=t("../common/msfnz"),n=Math.PI/2,e=1e-10,r=57.29577951308232,o=t("../common/adjust_lon"),h=Math.PI/4,u=t("../common/tsfnz"),l=t("../common/phi2z");s.init=function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=i(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},s.forward=function(t){var a=t.x,s=t.y;if(s*r>90&&-90>s*r&&a*r>180&&-180>a*r)return null;var i,l;if(Math.abs(Math.abs(s)-n)<=e)return null;if(this.sphere)i=this.x0+this.a*this.k0*o(a-this.long0),l=this.y0+this.a*this.k0*Math.log(Math.tan(h+.5*s));else{var c=Math.sin(s),M=u(this.e,s,c);i=this.x0+this.a*this.k0*o(a-this.long0),l=this.y0-this.a*this.k0*Math.log(M)}return t.x=i,t.y=l,t},s.inverse=function(t){var a,s,i=t.x-this.x0,e=t.y-this.y0;if(this.sphere)s=n-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var r=Math.exp(-e/(this.a*this.k0));if(s=l(this.e,r),-9999===s)return null}return a=o(this.long0+i/(this.a*this.k0)),t.x=a,t.y=s,t},s.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/tsfnz":24}],53:[function(t,a,s){var i=t("../common/adjust_lon");s.init=function(){},s.forward=function(t){var a=t.x,s=t.y,n=i(a-this.long0),e=this.x0+this.a*n,r=this.y0+this.a*Math.log(Math.tan(Math.PI/4+s/2.5))*1.25;return t.x=e,t.y=r,t},s.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var a=i(this.long0+t.x/this.a),s=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=a,t.y=s,t},s.names=["Miller_Cylindrical","mill"]},{"../common/adjust_lon":5}],54:[function(t,a,s){var i=t("../common/adjust_lon"),n=1e-10;s.init=function(){},s.forward=function(t){for(var a=t.x,s=t.y,e=i(a-this.long0),r=s,o=Math.PI*Math.sin(s),h=0;!0;h++){var u=-(r+Math.sin(r)-o)/(1+Math.cos(r));if(r+=u,Math.abs(u)<n)break}r/=2,Math.PI/2-Math.abs(s)<n&&(e=0);var l=.900316316158*this.a*e*Math.cos(r)+this.x0,c=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=l,t.y=c,t},s.inverse=function(t){var a,s;t.x-=this.x0,t.y-=this.y0,s=t.y/(1.4142135623731*this.a),Math.abs(s)>.999999999999&&(s=.999999999999),a=Math.asin(s);var n=i(this.long0+t.x/(.900316316158*this.a*Math.cos(a)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),s=(2*a+Math.sin(2*a))/Math.PI,Math.abs(s)>1&&(s=1);var e=Math.asin(s);return t.x=n,t.y=e,t},s.names=["Mollweide","moll"]},{"../common/adjust_lon":5}],55:[function(t,a,s){var i=484813681109536e-20;s.iterations=1,s.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},s.forward=function(t){var a,s=t.x,n=t.y,e=n-this.lat0,r=s-this.long0,o=e/i*1e-5,h=r,u=1,l=0;for(a=1;10>=a;a++)u*=o,l+=this.A[a]*u;var c,M,f=l,m=h,d=1,p=0,_=0,x=0;for(a=1;6>=a;a++)c=d*f-p*m,M=p*f+d*m,d=c,p=M,_=_+this.B_re[a]*d-this.B_im[a]*p,x=x+this.B_im[a]*d+this.B_re[a]*p;return t.x=x*this.a+this.x0,t.y=_*this.a+this.y0,t},s.inverse=function(t){var a,s,n,e=t.x,r=t.y,o=e-this.x0,h=r-this.y0,u=h/this.a,l=o/this.a,c=1,M=0,f=0,m=0;for(a=1;6>=a;a++)s=c*u-M*l,n=M*u+c*l,c=s,M=n,f=f+this.C_re[a]*c-this.C_im[a]*M,m=m+this.C_im[a]*c+this.C_re[a]*M;for(var d=0;d<this.iterations;d++){var p,_,x=f,v=m,b=u,y=l;for(a=2;6>=a;a++)p=x*f-v*m,_=v*f+x*m,x=p,v=_,b+=(a-1)*(this.B_re[a]*x-this.B_im[a]*v),y+=(a-1)*(this.B_im[a]*x+this.B_re[a]*v);x=1,v=0;var S=this.B_re[1],I=this.B_im[1];for(a=2;6>=a;a++)p=x*f-v*m,_=v*f+x*m,x=p,v=_,S+=a*(this.B_re[a]*x-this.B_im[a]*v),I+=a*(this.B_im[a]*x+this.B_re[a]*v);var g=S*S+I*I;f=(b*S+y*I)/g,m=(y*S-b*I)/g}var D=f,F=m,w=1,E=0;for(a=1;9>=a;a++)w*=D,E+=this.D[a]*w;var P=this.lat0+E*i*1e5,A=this.long0+F;return t.x=A,t.y=P,t},s.names=["New_Zealand_Map_Grid","nzmg"]},{}],56:[function(t,a,s){var i=t("../common/tsfnz"),n=t("../common/adjust_lon"),e=t("../common/phi2z"),r=Math.PI/2,o=Math.PI/4,h=1e-10;s.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),a=Math.cos(this.lat0),s=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(a,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-s*s);var e=i(this.e,this.lat0,t),r=this.bl/a*Math.sqrt((1-this.es)/(1-s*s));1>r*r&&(r=1);var o,h;if(isNaN(this.longc)){var u=i(this.e,this.lat1,Math.sin(this.lat1)),l=i(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(r+Math.sqrt(r*r-1))*Math.pow(e,this.bl):this.el=(r-Math.sqrt(r*r-1))*Math.pow(e,this.bl);var c=Math.pow(u,this.bl),M=Math.pow(l,this.bl);o=this.el/c,h=.5*(o-1/o);var f=(this.el*this.el-M*c)/(this.el*this.el+M*c),m=(M-c)/(M+c),d=n(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(f*Math.tan(.5*this.bl*d)/m)/this.bl,this.long0=n(this.long0);var p=n(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*p)/h),this.alpha=Math.asin(r*Math.sin(this.gamma0))}else o=this.lat0>=0?r+Math.sqrt(r*r-1):r-Math.sqrt(r*r-1),this.el=o*Math.pow(e,this.bl),h=.5*(o-1/o),this.gamma0=Math.asin(Math.sin(this.alpha)/r),this.long0=this.longc-Math.asin(h*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(r*r-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(r*r-1),Math.cos(this.alpha))},s.forward=function(t){var a,s,e,u=t.x,l=t.y,c=n(u-this.long0);if(Math.abs(Math.abs(l)-r)<=h)e=l>0?-1:1,s=this.al/this.bl*Math.log(Math.tan(o+e*this.gamma0*.5)),a=-1*e*r*this.al/this.bl;else{var M=i(this.e,l,Math.sin(l)),f=this.el/Math.pow(M,this.bl),m=.5*(f-1/f),d=.5*(f+1/f),p=Math.sin(this.bl*c),_=(m*Math.sin(this.gamma0)-p*Math.cos(this.gamma0))/d;s=Math.abs(Math.abs(_)-1)<=h?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-_)/(1+_))/this.bl,a=Math.abs(Math.cos(this.bl*c))<=h?this.al*this.bl*c:this.al*Math.atan2(m*Math.cos(this.gamma0)+p*Math.sin(this.gamma0),Math.cos(this.bl*c))/this.bl}return this.no_rot?(t.x=this.x0+a,t.y=this.y0+s):(a-=this.uc,t.x=this.x0+s*Math.cos(this.alpha)+a*Math.sin(this.alpha),t.y=this.y0+a*Math.cos(this.alpha)-s*Math.sin(this.alpha)),t},s.inverse=function(t){var a,s;this.no_rot?(s=t.y-this.y0,a=t.x-this.x0):(s=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),a=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),a+=this.uc);var i=Math.exp(-1*this.bl*s/this.al),o=.5*(i-1/i),u=.5*(i+1/i),l=Math.sin(this.bl*a/this.al),c=(l*Math.cos(this.gamma0)+o*Math.sin(this.gamma0))/u,M=Math.pow(this.el/Math.sqrt((1+c)/(1-c)),1/this.bl);return Math.abs(c-1)<h?(t.x=this.long0,t.y=r):Math.abs(c+1)<h?(t.x=this.long0,t.y=-1*r):(t.y=e(this.e,M),t.x=n(this.long0-Math.atan2(o*Math.cos(this.gamma0)-l*Math.sin(this.gamma0),Math.cos(this.bl*a/this.al))/this.bl)),t},s.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},{"../common/adjust_lon":5,"../common/phi2z":16,"../common/tsfnz":24}],57:[function(t,a,s){var i=t("../common/e0fn"),n=t("../common/e1fn"),e=t("../common/e2fn"),r=t("../common/e3fn"),o=t("../common/adjust_lon"),h=t("../common/adjust_lat"),u=t("../common/mlfn"),l=1e-10,c=t("../common/gN"),M=20;s.init=function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=i(this.es),this.e1=n(this.es),this.e2=e(this.es),this.e3=r(this.es),this.ml0=this.a*u(this.e0,this.e1,this.e2,this.e3,this.lat0)},s.forward=function(t){var a,s,i,n=t.x,e=t.y,r=o(n-this.long0);if(i=r*Math.sin(e),this.sphere)Math.abs(e)<=l?(a=this.a*r,s=-1*this.a*this.lat0):(a=this.a*Math.sin(i)/Math.tan(e),s=this.a*(h(e-this.lat0)+(1-Math.cos(i))/Math.tan(e)));else if(Math.abs(e)<=l)a=this.a*r,s=-1*this.ml0;else{var M=c(this.a,this.e,Math.sin(e))/Math.tan(e);a=M*Math.sin(i),s=this.a*u(this.e0,this.e1,this.e2,this.e3,e)-this.ml0+M*(1-Math.cos(i))}return t.x=a+this.x0,t.y=s+this.y0,t},s.inverse=function(t){var a,s,i,n,e,r,h,c,f;if(i=t.x-this.x0,n=t.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=l)a=o(i/this.a+this.long0),s=0;else{r=this.lat0+n/this.a,h=i*i/this.a/this.a+r*r,c=r;var m;for(e=M;e;--e)if(m=Math.tan(c),f=-1*(r*(c*m+1)-c-.5*(c*c+h)*m)/((c-r)/m-1),c+=f,Math.abs(f)<=l){s=c;break}a=o(this.long0+Math.asin(i*Math.tan(c)/this.a)/Math.sin(s))}else if(Math.abs(n+this.ml0)<=l)s=0,a=o(this.long0+i/this.a);else{r=(this.ml0+n)/this.a,h=i*i/this.a/this.a+r*r,c=r;var d,p,_,x,v;for(e=M;e;--e)if(v=this.e*Math.sin(c),d=Math.sqrt(1-v*v)*Math.tan(c),p=this.a*u(this.e0,this.e1,this.e2,this.e3,c),_=this.e0-2*this.e1*Math.cos(2*c)+4*this.e2*Math.cos(4*c)-6*this.e3*Math.cos(6*c),x=p/this.a,f=(r*(d*x+1)-x-.5*d*(x*x+h))/(this.es*Math.sin(2*c)*(x*x+h-2*r*x)/(4*d)+(r-x)*(d*_-2/Math.sin(2*c))-_),c-=f,Math.abs(f)<=l){s=c;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(s),2))*Math.tan(s),a=o(this.long0+Math.asin(i*d/this.a)/Math.sin(s))}return t.x=a,t.y=s,t},s.names=["Polyconic","poly"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/mlfn":14}],58:[function(t,a,s){var i=t("../common/adjust_lon"),n=t("../common/adjust_lat"),e=t("../common/pj_enfn"),r=20,o=t("../common/pj_mlfn"),h=t("../common/pj_inv_mlfn"),u=Math.PI/2,l=1e-10,c=t("../common/asinz");s.init=function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=e(this.es)},s.forward=function(t){var a,s,n=t.x,e=t.y;if(n=i(n-this.long0),this.sphere){if(this.m)for(var h=this.n*Math.sin(e),u=r;u;--u){var c=(this.m*e+Math.sin(e)-h)/(this.m+Math.cos(e));if(e-=c,Math.abs(c)<l)break}else e=1!==this.n?Math.asin(this.n*Math.sin(e)):e;a=this.a*this.C_x*n*(this.m+Math.cos(e)),s=this.a*this.C_y*e}else{var M=Math.sin(e),f=Math.cos(e);s=this.a*o(e,M,f,this.en),a=this.a*n*f/Math.sqrt(1-this.es*M*M)}return t.x=a,t.y=s,t},s.inverse=function(t){var a,s,e,r;return t.x-=this.x0,e=t.x/this.a,t.y-=this.y0,a=t.y/this.a,this.sphere?(a/=this.C_y,e/=this.C_x*(this.m+Math.cos(a)),this.m?a=c((this.m*a+Math.sin(a))/this.n):1!==this.n&&(a=c(Math.sin(a)/this.n)),e=i(e+this.long0),a=n(a)):(a=h(t.y/this.a,this.es,this.en),r=Math.abs(a),u>r?(r=Math.sin(a),s=this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(a)),e=i(s)):u>r-l&&(e=this.long0)),t.x=e,t.y=a,t},s.names=["Sinusoidal","sinu"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/asinz":6,"../common/pj_enfn":17,"../common/pj_inv_mlfn":18,"../common/pj_mlfn":19}],59:[function(t,a,s){s.init=function(){var t=this.lat0;this.lambda0=this.long0;var a=Math.sin(t),s=this.a,i=this.rf,n=1/i,e=2*n-Math.pow(n,2),r=this.e=Math.sqrt(e);this.R=this.k0*s*Math.sqrt(1-e)/(1-e*Math.pow(a,2)),this.alpha=Math.sqrt(1+e/(1-e)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(a/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),h=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+r*a)/(1-r*a));this.K=o-this.alpha*h+this.alpha*r/2*u},s.forward=function(t){var a=Math.log(Math.tan(Math.PI/4-t.y/2)),s=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(a+s)+this.K,n=2*(Math.atan(Math.exp(i))-Math.PI/4),e=this.alpha*(t.x-this.lambda0),r=Math.atan(Math.sin(e)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(e))),o=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(e));
return t.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,t.x=this.R*r+this.x0,t},s.inverse=function(t){for(var a=t.x-this.x0,s=t.y-this.y0,i=a/this.R,n=2*(Math.atan(Math.exp(s/this.R))-Math.PI/4),e=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(i)),r=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(n))),o=this.lambda0+r/this.alpha,h=0,u=e,l=-1e3,c=0;Math.abs(u-l)>1e-7;){if(++c>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+e/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),l=u,u=2*Math.atan(Math.exp(h))-Math.PI/2}return t.x=o,t.y=u,t},s.names=["somerc"]},{}],60:[function(t,a,s){var i=Math.PI/2,n=1e-10,e=t("../common/sign"),r=t("../common/msfnz"),o=t("../common/tsfnz"),h=t("../common/phi2z"),u=t("../common/adjust_lon");s.ssfn_=function(t,a,s){return a*=s,Math.tan(.5*(i+t))*Math.pow((1-a)/(1+a),.5*s)},s.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=n&&(this.k0=.5*(1+e(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=n&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=n&&(this.k0=.5*this.cons*r(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/o(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=r(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-i,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},s.forward=function(t){var a,s,e,r,h,l,c=t.x,M=t.y,f=Math.sin(M),m=Math.cos(M),d=u(c-this.long0);return Math.abs(Math.abs(c-this.long0)-Math.PI)<=n&&Math.abs(M+this.lat0)<=n?(t.x=NaN,t.y=NaN,t):this.sphere?(a=2*this.k0/(1+this.sinlat0*f+this.coslat0*m*Math.cos(d)),t.x=this.a*a*m*Math.sin(d)+this.x0,t.y=this.a*a*(this.coslat0*f-this.sinlat0*m*Math.cos(d))+this.y0,t):(s=2*Math.atan(this.ssfn_(M,f,this.e))-i,r=Math.cos(s),e=Math.sin(s),Math.abs(this.coslat0)<=n?(h=o(this.e,M*this.con,this.con*f),l=2*this.a*this.k0*h/this.cons,t.x=this.x0+l*Math.sin(c-this.long0),t.y=this.y0-this.con*l*Math.cos(c-this.long0),t):(Math.abs(this.sinlat0)<n?(a=2*this.a*this.k0/(1+r*Math.cos(d)),t.y=a*e):(a=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*e+this.cosX0*r*Math.cos(d))),t.y=a*(this.cosX0*e-this.sinX0*r*Math.cos(d))+this.y0),t.x=a*r*Math.sin(d)+this.x0,t))},s.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var a,s,e,r,o,l=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var c=2*Math.atan(l/(.5*this.a*this.k0));return a=this.long0,s=this.lat0,n>=l?(t.x=a,t.y=s,t):(s=Math.asin(Math.cos(c)*this.sinlat0+t.y*Math.sin(c)*this.coslat0/l),a=u(Math.abs(this.coslat0)<n?this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y):this.long0+Math.atan2(t.x*Math.sin(c),l*this.coslat0*Math.cos(c)-t.y*this.sinlat0*Math.sin(c))),t.x=a,t.y=s,t)}if(Math.abs(this.coslat0)<=n){if(n>=l)return s=this.lat0,a=this.long0,t.x=a,t.y=s,t;t.x*=this.con,t.y*=this.con,e=l*this.cons/(2*this.a*this.k0),s=this.con*h(this.e,e),a=this.con*u(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(l*this.cosX0/(2*this.a*this.k0*this.ms1)),a=this.long0,n>=l?o=this.X0:(o=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/l),a=u(this.long0+Math.atan2(t.x*Math.sin(r),l*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),s=-1*h(this.e,Math.tan(.5*(i+o)));return t.x=a,t.y=s,t},s.names=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],61:[function(t,a,s){var i=t("./gauss"),n=t("../common/adjust_lon");s.init=function(){i.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},s.forward=function(t){var a,s,e,r;return t.x=n(t.x-this.long0),i.forward.apply(this,[t]),a=Math.sin(t.y),s=Math.cos(t.y),e=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*a+this.cosc0*s*e),t.x=r*s*Math.sin(t.x),t.y=r*(this.cosc0*a-this.sinc0*s*e),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},s.inverse=function(t){var a,s,e,r,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var h=2*Math.atan2(o,this.R2);a=Math.sin(h),s=Math.cos(h),r=Math.asin(s*this.sinc0+t.y*a*this.cosc0/o),e=Math.atan2(t.x*a,o*this.cosc0*s-t.y*this.sinc0*a)}else r=this.phic0,e=0;return t.x=e,t.y=r,i.inverse.apply(this,[t]),t.x=n(t.x+this.long0),t},s.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},{"../common/adjust_lon":5,"./gauss":46}],62:[function(t,a,s){var i=t("../common/e0fn"),n=t("../common/e1fn"),e=t("../common/e2fn"),r=t("../common/e3fn"),o=t("../common/mlfn"),h=t("../common/adjust_lon"),u=Math.PI/2,l=1e-10,c=t("../common/sign"),M=t("../common/asinz");s.init=function(){this.e0=i(this.es),this.e1=n(this.es),this.e2=e(this.es),this.e3=r(this.es),this.ml0=this.a*o(this.e0,this.e1,this.e2,this.e3,this.lat0)},s.forward=function(t){var a,s,i,n=t.x,e=t.y,r=h(n-this.long0),u=Math.sin(e),l=Math.cos(e);if(this.sphere){var c=l*Math.sin(r);if(Math.abs(Math.abs(c)-1)<1e-10)return 93;s=.5*this.a*this.k0*Math.log((1+c)/(1-c)),a=Math.acos(l*Math.cos(r)/Math.sqrt(1-c*c)),0>e&&(a=-a),i=this.a*this.k0*(a-this.lat0)}else{var M=l*r,f=Math.pow(M,2),m=this.ep2*Math.pow(l,2),d=Math.tan(e),p=Math.pow(d,2);a=1-this.es*Math.pow(u,2);var _=this.a/Math.sqrt(a),x=this.a*o(this.e0,this.e1,this.e2,this.e3,e);s=this.k0*_*M*(1+f/6*(1-p+m+f/20*(5-18*p+Math.pow(p,2)+72*m-58*this.ep2)))+this.x0,i=this.k0*(x-this.ml0+_*d*(f*(.5+f/24*(5-p+9*m+4*Math.pow(m,2)+f/30*(61-58*p+Math.pow(p,2)+600*m-330*this.ep2)))))+this.y0}return t.x=s,t.y=i,t},s.inverse=function(t){var a,s,i,n,e,r,o=6;if(this.sphere){var f=Math.exp(t.x/(this.a*this.k0)),m=.5*(f-1/f),d=this.lat0+t.y/(this.a*this.k0),p=Math.cos(d);a=Math.sqrt((1-p*p)/(1+m*m)),e=M(a),0>d&&(e=-e),r=0===m&&0===p?this.long0:h(Math.atan2(m,p)+this.long0)}else{var _=t.x-this.x0,x=t.y-this.y0;for(a=(this.ml0+x/this.k0)/this.a,s=a,n=0;i=(a+this.e1*Math.sin(2*s)-this.e2*Math.sin(4*s)+this.e3*Math.sin(6*s))/this.e0-s,s+=i,!(Math.abs(i)<=l);n++)if(n>=o)return 95;if(Math.abs(s)<u){var v=Math.sin(s),b=Math.cos(s),y=Math.tan(s),S=this.ep2*Math.pow(b,2),I=Math.pow(S,2),g=Math.pow(y,2),D=Math.pow(g,2);a=1-this.es*Math.pow(v,2);var F=this.a/Math.sqrt(a),w=F*(1-this.es)/a,E=_/(F*this.k0),P=Math.pow(E,2);e=s-F*y*P/w*(.5-P/24*(5+3*g+10*S-4*I-9*this.ep2-P/30*(61+90*g+298*S+45*D-252*this.ep2-3*I))),r=h(this.long0+E*(1-P/6*(1+2*g+S-P/20*(5-2*S+28*g-3*I+8*this.ep2+24*D)))/b)}else e=u*c(x),r=this.long0}return t.x=r,t.y=e,t},s.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/mlfn":14,"../common/sign":21}],63:[function(t,a,s){var i=.017453292519943295,n=t("./tmerc");s.dependsOn="tmerc",s.init=function(){this.zone&&(this.lat0=0,this.long0=(6*Math.abs(this.zone)-183)*i,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,n.init.apply(this),this.forward=n.forward,this.inverse=n.inverse)},s.names=["Universal Transverse Mercator System","utm"]},{"./tmerc":62}],64:[function(t,a,s){var i=t("../common/adjust_lon"),n=Math.PI/2,e=1e-10,r=t("../common/asinz");s.init=function(){this.R=this.a},s.forward=function(t){var a,s,o=t.x,h=t.y,u=i(o-this.long0);Math.abs(h)<=e&&(a=this.x0+this.R*u,s=this.y0);var l=r(2*Math.abs(h/Math.PI));(Math.abs(u)<=e||Math.abs(Math.abs(h)-n)<=e)&&(a=this.x0,s=h>=0?this.y0+Math.PI*this.R*Math.tan(.5*l):this.y0+Math.PI*this.R*-Math.tan(.5*l));var c=.5*Math.abs(Math.PI/u-u/Math.PI),M=c*c,f=Math.sin(l),m=Math.cos(l),d=m/(f+m-1),p=d*d,_=d*(2/f-1),x=_*_,v=Math.PI*this.R*(c*(d-x)+Math.sqrt(M*(d-x)*(d-x)-(x+M)*(p-x)))/(x+M);0>u&&(v=-v),a=this.x0+v;var b=M+d;return v=Math.PI*this.R*(_*b-c*Math.sqrt((x+M)*(M+1)-b*b))/(x+M),s=h>=0?this.y0+v:this.y0-v,t.x=a,t.y=s,t},s.inverse=function(t){var a,s,n,r,o,h,u,l,c,M,f,m,d;return t.x-=this.x0,t.y-=this.y0,f=Math.PI*this.R,n=t.x/f,r=t.y/f,o=n*n+r*r,h=-Math.abs(r)*(1+o),u=h-2*r*r+n*n,l=-2*h+1+2*r*r+o*o,d=r*r/l+(2*u*u*u/l/l/l-9*h*u/l/l)/27,c=(h-u*u/3/l)/l,M=2*Math.sqrt(-c/3),f=3*d/c/M,Math.abs(f)>1&&(f=f>=0?1:-1),m=Math.acos(f)/3,s=t.y>=0?(-M*Math.cos(m+Math.PI/3)-u/3/l)*Math.PI:-(-M*Math.cos(m+Math.PI/3)-u/3/l)*Math.PI,a=Math.abs(n)<e?this.long0:i(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(n*n-r*r)+o*o))/2/n),t.x=a,t.y=s,t},s.names=["Van_der_Grinten_I","VanDerGrinten","vandg"]},{"../common/adjust_lon":5,"../common/asinz":6}],65:[function(t,a,s){var i=.017453292519943295,n=57.29577951308232,e=1,r=2,o=t("./datum_transform"),h=t("./adjust_axis"),u=t("./Proj"),l=t("./common/toPoint");a.exports=function c(t,a,s){function M(t,a){return(t.datum.datum_type===e||t.datum.datum_type===r)&&"WGS84"!==a.datumCode}var f;return Array.isArray(s)&&(s=l(s)),t.datum&&a.datum&&(M(t,a)||M(a,t))&&(f=new u("WGS84"),c(t,f,s),t=f),"enu"!==t.axis&&h(t,!1,s),"longlat"===t.projName?(s.x*=i,s.y*=i):(t.to_meter&&(s.x*=t.to_meter,s.y*=t.to_meter),t.inverse(s)),t.from_greenwich&&(s.x+=t.from_greenwich),s=o(t.datum,a.datum,s),a.from_greenwich&&(s.x-=a.from_greenwich),"longlat"===a.projName?(s.x*=n,s.y*=n):(a.forward(s),a.to_meter&&(s.x/=a.to_meter,s.y/=a.to_meter)),"enu"!==a.axis&&h(a,!0,s),s}},{"./Proj":2,"./adjust_axis":3,"./common/toPoint":23,"./datum_transform":31}],66:[function(t,a,s){function i(t,a,s){t[a]=s.map(function(t){var a={};return n(t,a),a}).reduce(function(t,a){return u(t,a)},{})}function n(t,a){var s;return Array.isArray(t)?(s=t.shift(),"PARAMETER"===s&&(s=t.shift()),void(1===t.length?Array.isArray(t[0])?(a[s]={},n(t[0],a[s])):a[s]=t[0]:t.length?"TOWGS84"===s?a[s]=t:(a[s]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(s)>-1?(a[s]={name:t[0].toLowerCase(),convert:t[1]},3===t.length&&(a[s].auth=t[2])):"SPHEROID"===s?(a[s]={name:t[0],a:t[1],rf:t[2]},4===t.length&&(a[s].auth=t[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(s)>-1?(t[0]=["name",t[0]],i(a,s,t)):t.every(function(t){return Array.isArray(t)})?i(a,s,t):n(t,a[s])):a[s]=!0)):void(a[t]=!0)}function e(t,a){var s=a[0],i=a[1];!(s in t)&&i in t&&(t[s]=t[i],3===a.length&&(t[s]=a[2](t[s])))}function r(t){return t*h}function o(t){function a(a){var s=t.to_meter||1;return parseFloat(a,10)*s}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=parseFloat(t.UNIT.convert,10)*t.DATUM.SPHEROID.a):t.to_meter=parseFloat(t.UNIT.convert,10))),t.GEOGCS&&(t.GEOGCS.DATUM?t.datumCode=t.GEOGCS.DATUM.name.toLowerCase():t.datumCode=t.GEOGCS.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===t.datumCode||"new_zealand_1949"===t.datumCode)&&(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),t.GEOGCS.DATUM&&t.GEOGCS.DATUM.SPHEROID&&(t.ellps=t.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=t.GEOGCS.DATUM.SPHEROID.a,t.rf=parseFloat(t.GEOGCS.DATUM.SPHEROID.rf,10)),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36")),t.b&&!isFinite(t.b)&&(t.b=t.a);var s=function(a){return e(t,a)},i=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",r],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",r],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",r],["lat0","latitude_of_origin",r],["lat0","standard_parallel_1",r],["lat1","standard_parallel_1",r],["lat2","standard_parallel_2",r],["alpha","azimuth",r],["srsCode","name"]];i.forEach(s),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=r(t.lat1>0?90:-90),t.lat_ts=t.lat1)}var h=.017453292519943295,u=t("./extend");a.exports=function(t,a){var s=JSON.parse((","+t).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]').replace(/,\["VERTCS".+/,"")),i=s.shift(),e=s.shift();s.unshift(["name",e]),s.unshift(["type",i]),s.unshift("output");var r={};return n(s,r),o(r.output),u(a,r.output)}},{"./extend":34}],67:[function(t,a,s){function i(t){return t*(Math.PI/180)}function n(t){return 180*(t/Math.PI)}function e(t){var a,s,n,e,r,h,u,l,c,M=t.lat,f=t.lon,m=6378137,d=.00669438,p=.9996,_=i(M),x=i(f);c=Math.floor((f+180)/6)+1,180===f&&(c=60),M>=56&&64>M&&f>=3&&12>f&&(c=32),M>=72&&84>M&&(f>=0&&9>f?c=31:f>=9&&21>f?c=33:f>=21&&33>f?c=35:f>=33&&42>f&&(c=37)),a=6*(c-1)-180+3,l=i(a),s=d/(1-d),n=m/Math.sqrt(1-d*Math.sin(_)*Math.sin(_)),e=Math.tan(_)*Math.tan(_),r=s*Math.cos(_)*Math.cos(_),h=Math.cos(_)*(x-l),u=m*((1-d/4-3*d*d/64-5*d*d*d/256)*_-(3*d/8+3*d*d/32+45*d*d*d/1024)*Math.sin(2*_)+(15*d*d/256+45*d*d*d/1024)*Math.sin(4*_)-35*d*d*d/3072*Math.sin(6*_));var v=p*n*(h+(1-e+r)*h*h*h/6+(5-18*e+e*e+72*r-58*s)*h*h*h*h*h/120)+5e5,b=p*(u+n*Math.tan(_)*(h*h/2+(5-e+9*r+4*r*r)*h*h*h*h/24+(61-58*e+e*e+600*r-330*s)*h*h*h*h*h*h/720));return 0>M&&(b+=1e7),{northing:Math.round(b),easting:Math.round(v),zoneNumber:c,zoneLetter:o(M)}}function r(t){var a=t.northing,s=t.easting,i=t.zoneLetter,e=t.zoneNumber;if(0>e||e>60)return null;var o,h,u,l,c,M,f,m,d,p,_=.9996,x=6378137,v=.00669438,b=(1-Math.sqrt(1-v))/(1+Math.sqrt(1-v)),y=s-5e5,S=a;"N">i&&(S-=1e7),m=6*(e-1)-180+3,o=v/(1-v),f=S/_,d=f/(x*(1-v/4-3*v*v/64-5*v*v*v/256)),p=d+(3*b/2-27*b*b*b/32)*Math.sin(2*d)+(21*b*b/16-55*b*b*b*b/32)*Math.sin(4*d)+151*b*b*b/96*Math.sin(6*d),h=x/Math.sqrt(1-v*Math.sin(p)*Math.sin(p)),u=Math.tan(p)*Math.tan(p),l=o*Math.cos(p)*Math.cos(p),c=x*(1-v)/Math.pow(1-v*Math.sin(p)*Math.sin(p),1.5),M=y/(h*_);var I=p-h*Math.tan(p)/c*(M*M/2-(5+3*u+10*l-4*l*l-9*o)*M*M*M*M/24+(61+90*u+298*l+45*u*u-252*o-3*l*l)*M*M*M*M*M*M/720);I=n(I);var g=(M-(1+2*u+l)*M*M*M/6+(5-2*l+28*u-3*l*l+8*o+24*u*u)*M*M*M*M*M/120)/Math.cos(p);g=m+n(g);var D;if(t.accuracy){var F=r({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});D={top:F.lat,right:F.lon,bottom:I,left:g}}else D={lat:I,lon:g};return D}function o(t){var a="Z";return 84>=t&&t>=72?a="X":72>t&&t>=64?a="W":64>t&&t>=56?a="V":56>t&&t>=48?a="U":48>t&&t>=40?a="T":40>t&&t>=32?a="S":32>t&&t>=24?a="R":24>t&&t>=16?a="Q":16>t&&t>=8?a="P":8>t&&t>=0?a="N":0>t&&t>=-8?a="M":-8>t&&t>=-16?a="L":-16>t&&t>=-24?a="K":-24>t&&t>=-32?a="J":-32>t&&t>=-40?a="H":-40>t&&t>=-48?a="G":-48>t&&t>=-56?a="F":-56>t&&t>=-64?a="E":-64>t&&t>=-72?a="D":-72>t&&t>=-80&&(a="C"),a}function h(t,a){var s="00000"+t.easting,i="00000"+t.northing;return t.zoneNumber+t.zoneLetter+u(t.easting,t.northing,t.zoneNumber)+s.substr(s.length-5,a)+i.substr(i.length-5,a)}function u(t,a,s){var i=l(s),n=Math.floor(t/1e5),e=Math.floor(a/1e5)%20;return c(n,e,i)}function l(t){var a=t%p;return 0===a&&(a=p),a}function c(t,a,s){var i=s-1,n=_.charCodeAt(i),e=x.charCodeAt(i),r=n+t-1,o=e+a,h=!1;r>I&&(r=r-I+v-1,h=!0),(r===b||b>n&&r>b||(r>b||b>n)&&h)&&r++,(r===y||y>n&&r>y||(r>y||y>n)&&h)&&(r++,r===b&&r++),r>I&&(r=r-I+v-1),o>S?(o=o-S+v-1,h=!0):h=!1,(o===b||b>e&&o>b||(o>b||b>e)&&h)&&o++,(o===y||y>e&&o>y||(o>y||y>e)&&h)&&(o++,o===b&&o++),o>S&&(o=o-S+v-1);var u=String.fromCharCode(r)+String.fromCharCode(o);return u}function M(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var a,s=t.length,i=null,n="",e=0;!/[A-Z]/.test(a=t.charAt(e));){if(e>=2)throw"MGRSPoint bad conversion from: "+t;n+=a,e++}var r=parseInt(n,10);if(0===e||e+3>s)throw"MGRSPoint bad conversion from: "+t;var o=t.charAt(e++);if("A">=o||"B"===o||"Y"===o||o>="Z"||"I"===o||"O"===o)throw"MGRSPoint zone letter "+o+" not handled: "+t;i=t.substring(e,e+=2);for(var h=l(r),u=f(i.charAt(0),h),c=m(i.charAt(1),h);c<d(o);)c+=2e6;var M=s-e;if(M%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var p,_,x,v,b,y=M/2,S=0,I=0;return y>0&&(p=1e5/Math.pow(10,y),_=t.substring(e,e+y),S=parseFloat(_)*p,x=t.substring(e+y),I=parseFloat(x)*p),v=S+u,b=I+c,{easting:v,northing:b,zoneLetter:o,zoneNumber:r,accuracy:p}}function f(t,a){for(var s=_.charCodeAt(a-1),i=1e5,n=!1;s!==t.charCodeAt(0);){if(s++,s===b&&s++,s===y&&s++,s>I){if(n)throw"Bad character: "+t;s=v,n=!0}i+=1e5}return i}function m(t,a){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var s=x.charCodeAt(a-1),i=0,n=!1;s!==t.charCodeAt(0);){if(s++,s===b&&s++,s===y&&s++,s>S){if(n)throw"Bad character: "+t;s=v,n=!0}i+=1e5}return i}function d(t){var a;switch(t){case"C":a=11e5;break;case"D":a=2e6;break;case"E":a=28e5;break;case"F":a=37e5;break;case"G":a=46e5;break;case"H":a=55e5;break;case"J":a=64e5;break;case"K":a=73e5;break;case"L":a=82e5;break;case"M":a=91e5;break;case"N":a=0;break;case"P":a=8e5;break;case"Q":a=17e5;break;case"R":a=26e5;break;case"S":a=35e5;break;case"T":a=44e5;break;case"U":a=53e5;break;case"V":a=62e5;break;case"W":a=7e6;break;case"X":a=79e5;break;default:a=-1}if(a>=0)return a;throw"Invalid zone letter: "+t}var p=6,_="AJSAJS",x="AFAFAF",v=65,b=73,y=79,S=86,I=90;s.forward=function(t,a){return a=a||5,h(e({lat:t[1],lon:t[0]}),a)},s.inverse=function(t){var a=r(M(t.toUpperCase()));return a.lat&&a.lon?[a.lon,a.lat,a.lon,a.lat]:[a.left,a.bottom,a.right,a.top]},s.toPoint=function(t){var a=r(M(t.toUpperCase()));return a.lat&&a.lon?[a.lon,a.lat]:[(a.left+a.right)/2,(a.top+a.bottom)/2]}},{}],68:[function(t,a,s){a.exports={name:"proj4",version:"2.3.14",description:"Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",main:"lib/index.js",directories:{test:"test",doc:"docs"},scripts:{test:"./node_modules/istanbul/lib/cli.js test ./node_modules/mocha/bin/_mocha test/test.js"},repository:{type:"git",url:"git://github.com/proj4js/proj4js.git"},author:"",license:"MIT",jam:{main:"dist/proj4.js",include:["dist/proj4.js","README.md","AUTHORS","LICENSE.md"]},devDependencies:{"grunt-cli":"~0.1.13",grunt:"~0.4.2","grunt-contrib-connect":"~0.6.0","grunt-contrib-jshint":"~0.8.0",chai:"~1.8.1",mocha:"~1.17.1","grunt-mocha-phantomjs":"~0.4.0",browserify:"~12.0.1","grunt-browserify":"~4.0.1","grunt-contrib-uglify":"~0.11.1",curl:"git://github.com/cujojs/curl.git",istanbul:"~0.2.4",tin:"~0.4.0"},dependencies:{mgrs:"~0.0.2"}}},{}],"./includedProjections":[function(t,a,s){a.exports=t("hTEDpn")},{}],hTEDpn:[function(t,a,s){var i=[t("./lib/projections/tmerc"),t("./lib/projections/utm"),t("./lib/projections/sterea"),t("./lib/projections/stere"),t("./lib/projections/somerc"),t("./lib/projections/omerc"),t("./lib/projections/lcc"),t("./lib/projections/krovak"),t("./lib/projections/cass"),t("./lib/projections/laea"),t("./lib/projections/aea"),t("./lib/projections/gnom"),t("./lib/projections/cea"),t("./lib/projections/eqc"),t("./lib/projections/poly"),t("./lib/projections/nzmg"),t("./lib/projections/mill"),t("./lib/projections/sinu"),t("./lib/projections/moll"),t("./lib/projections/eqdc"),t("./lib/projections/vandg"),t("./lib/projections/aeqd")];a.exports=function(t){i.forEach(function(a){t.Proj.projections.add(a)})}},{"./lib/projections/aea":40,"./lib/projections/aeqd":41,"./lib/projections/cass":42,"./lib/projections/cea":43,"./lib/projections/eqc":44,"./lib/projections/eqdc":45,"./lib/projections/gnom":47,"./lib/projections/krovak":48,"./lib/projections/laea":49,"./lib/projections/lcc":50,"./lib/projections/mill":53,"./lib/projections/moll":54,"./lib/projections/nzmg":55,"./lib/projections/omerc":56,"./lib/projections/poly":57,"./lib/projections/sinu":58,"./lib/projections/somerc":59,"./lib/projections/stere":60,"./lib/projections/sterea":61,"./lib/projections/tmerc":62,"./lib/projections/utm":63,"./lib/projections/vandg":64}]},{},[36])(36)})}])});